<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="Android开发一枚">
<meta property="og:type" content="website">
<meta property="og:title" content="Silence潇湘夜雨">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Silence潇湘夜雨">
<meta property="og:description" content="Android开发一枚">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Silence潇湘夜雨">
<meta name="twitter:description" content="Android开发一枚">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":true,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>Silence潇湘夜雨</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Silence潇湘夜雨</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Android开发一枚</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home //首页"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user //关于"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags  //标签"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th //分类"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive //归档"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-schedule">
          <a href="/schedule/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar //日程表"></i> <br>
            
            日程表
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap //站点地图"></i> <br>
            
            站点地图
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/17/Android-获取验证码自动填充/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Silence潇湘夜雨">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Silence潇湘夜雨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/17/Android-获取验证码自动填充/" itemprop="url">Android 获取验证码自动填充</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-17T18:58:47+08:00">
                2019-07-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h3><p>  手机获取验证码，这是每个APP都会实现的功能，但是获取验证码之后，切换到短信界面，然后再返回到当前界面，感觉比较蛋疼，也比较麻烦，因此想着获取到验证码之后自动填充这个功能相对来说就比较人性化，并且用户体验也比较好。</p>
<h3 id="首先"><a href="#首先" class="headerlink" title="首先"></a>首先</h3><p> 来分析一下获取验证码并且填充的流程：手机点击获取验证码，然后平台发送短信，监测短信数据库是否有更新，并且判断是否是自己所需要的验证码短信，如果是则直接获取验证码，并且填充到当前界面中去，如下图所示：<br><img src="https://upload-images.jianshu.io/upload_images/1716569-cdf84f24a601b662.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="填充验证码流程图.png"></p>
<h3 id="其次"><a href="#其次" class="headerlink" title="其次"></a>其次</h3><p> 我们监测短信验证信息其中要涉及到设计模式中的观察者模式，我们这里直接继承系统的ContentObserver这个类，实现短信信息的验证，并且自动填充。现在来看看我们的实现方法吧，先上图，no pic say a xx。<br><img src="https://upload-images.jianshu.io/upload_images/1716569-cfb3483bca687807.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="自动填充验证码.png"></p>
<ul>
<li>继承ContentObserver</li>
</ul>
<pre><code>    public class PhoneCode extends ContentObserver {
    private Context mContext; // 上下文
    private String code; // 验证码
    SmsListener mListener;
    private String mPhone;
    Cursor mCursor;

    public PhoneCode(Context context, Handler handler, String phone, SmsListener listener) {
    super(handler);
    this.mContext = context;
    this.mPhone = phone;
    this.mListener = listener;
    }

    public PhoneCode(Context context, Handler handler, SmsListener listener) {
    super(handler);
    this.mContext = context;
    this.mListener = listener;
    }

    @Override
    public void onChange(boolean selfChange, Uri uri) {
    super.onChange(selfChange);
    // 第一次回调 不是我们想要的 直接返回
    if (uri.toString().equals(&quot;content://sms/raw&quot;)) {
        return;
    }
    // 第二次回调 查询收件箱里的内容
    Uri inboxUri = Uri.parse(&quot;content://sms/inbox&quot;);
    // 按时间顺序排序短信数据库
    mCursor = mContext.getContentResolver().query(inboxUri, null, null,
            null, &quot;date desc&quot;);
    if (mCursor != null) {
        if (mCursor.moveToFirst()) {
            // 获取手机号
            String address = mCursor.getString(mCursor.getColumnIndex(&quot;address&quot;));
            Log.e(&quot;ADDRESS&quot;, address);
            // 获取短信内容
            String body = mCursor.getString(mCursor.getColumnIndex(&quot;body&quot;));
            Log.e(&quot;ADDRESS&quot;, body);
            // 判断手机号是否为目标号码，服务号号码不固定请用正则表达式判断前几位。
            //加上这个判断必须知道发送方的电话号码，局限性比较高
    //                if (!address.equals(mPhone)) {
    //                    return;
    //                }
            if (!body.startsWith(&quot;天下为公&quot;)) {
                return;
            }
            // 正则表达式截取短信中的6位验证码
            String regEx = &quot;(?&lt;![0-9])([0-9]{&quot; + 6 + &quot;})(?![0-9])&quot;;
            Pattern pattern = Pattern.compile(regEx);
            Matcher matcher = pattern.matcher(body);
            // 如果找到通过Handler发送给主线程
            while (matcher.find()) {
                code = matcher.group();
                if (mListener != null) {
                    mListener.onResult(code);
                }
            }

        }
    }
    mCursor.close();
}

  /**
 * 短信回调接口
 */
public interface SmsListener {
    /**
     * @param result 回调内容（验证码）
     */
    void onResult(String result);
}
}</code></pre><ul>
<li><p>分析</p>
<pre><code>  代码很简单，其中有两个构造函数，一个是带电话号码的，一个是不带电话号码的。带电话号码（电话号
码是发送方的电话号码，也就是说是平台方或者发信人的电话号码）的，这样局限性比较大，只能收到固
定的发信人的电话验证码。这里注释了，因为我想直接获取验证码，不管是谁发的短信。另外一个是不带
电话号码的验证码，这里对短信的内容加了判断。试想，如果当我们获取短信的时候收到了一条其他平台
的验证码，但却不是我们需要的，这时候该怎么办？当然是直接抛弃了，然后等待我们自己的验证码了。
因为短信验证码 都有一定的格式所以这里只需要对验证码的开头进行判断就行。当然，我们也可以和后台
同学沟通好验证码格式，然后动态判断即可，比如我这里是 以“天下为公”开头，你也可以写成变量然后动
态改变即可。</code></pre></li>
<li><p>使用</p>
<pre><code> /**
  * 固定手机号码
  */
 private void fixedPhone(String phone) {
  mPhoneCode = new PhoneCode(this, new Handler(), phone,
          new PhoneCode.SmsListener() {
              @Override
              public void onResult(String result) {
                  ToastUtils.showMessage(PhoneActivity.this, result);
                  mEdtPhone.setText(result);
              }
          });
  // 注册短信变化监听
  this.getContentResolver().registerContentObserver(
          Uri.parse(&quot;content://sms/&quot;), true, mPhoneCode);
}

 /**
  * 没有手机号码
  */
  private void fixedPhone() {
   mPhoneCode = new PhoneCode(this, new Handler(),
           new PhoneCode.SmsListener() {
               @Override
              public void onResult(String result) {
                 ToastUtils.showMessage(PhoneActivity.this, result);
                 mEdtPhone.setText(result);
              }
         });
 // 注册短信变化监听
this.getContentResolver().registerContentObserver(</code></pre><p> ​            Uri.parse(“content://sms/“), true, mPhoneCode);</p>
<pre><code>}</code></pre></li>
<li><p>分析</p>
<pre><code>这里用的是两个使用方式，一种是带电话号码的，一个是不带的，要用哪个调那个，so easy。</code></pre></li>
</ul>
<h3 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h3><p>   <strong>这是一个很小的功能，但是写程序的时候要考虑的东西有很多。把我们自己当成使用者，用心写好一个程序，不为了完成功能而完成。实现代码一是要考虑功能，二是要考虑代码的优雅。不可不经测试和推敲就拿出去分享或者使用，不仅误导了他人，也让自己蒙羞。现在网上千篇一律没有经过推敲的文章很多，遇到过许多坑爹的，这里就发一下牢骚和提醒一下自己做事一定要认真。</strong></p>
<h3 id="致谢"><a href="#致谢" class="headerlink" title="致谢"></a>致谢</h3><p><a href="https://www.jianshu.com/p/26a71886ddde" target="_blank" rel="noopener">Android短信验证码自动填写功能实现</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/17/Android观察者模式初探/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Silence潇湘夜雨">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Silence潇湘夜雨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/17/Android观察者模式初探/" itemprop="url">Android观察者模式初探</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-17T18:55:41+08:00">
                2019-07-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h3><p>​    好久都没更新了，最近因为看设计模式，因为首先看的是观察者模式。对观察者模式有了一个比较全面的理解。今天斗胆来说一下自己的理解，还望各位看官老爷轻点打脸。</p>
<p>###话不多说先看图</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1716569-116cd2cc32a17f6b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="观察者模式.png"></p>
<p>   _ 容小可解释一下,在这个界面中，要实现在一个输入框中写入文本然后点击设置按钮，实现下面的TextView实时改变的功能。到这里也许有人会问了可以用TextWatcher实现啊，对的，因为TextWatcher中运用的就是观察者模式（其实Android中运用观察者模式的地方很多）来看正文。_</p>
<p>#释义</p>
<p>###观察者模式<br>​      定义对象间的一种一个(Subject)对多(Observer)的依赖关系，当一个对象的状态发生改变时，所有依赖于它的 对象都得到通知并被自动更新 。</p>
<p>###适用性：<br>​      1. 当一个抽象模型有两个方面，其中一个方面依赖于另一方面 将这两者封装成独立的对象中以使它们可以各自独立的改变和服用 。<br>​      2. 当对一个对象的改变需要同时改变其他对象，而不知道具体有多少对象有待改变 。<br>​      3. 当一个对象必须通知其它对象，而它又不能假定其它对象是谁 </p>
<h3 id="参与者："><a href="#参与者：" class="headerlink" title="参与者："></a>参与者：</h3><pre><code>  1. Subject（目标） 
     目标知道它的观察者，可以有任意多个观察者观察同一个目标提供注册和删除观察者对象的接口 
  2. Observer（观察者） 
     为那些在目标发生改变时需获得通知的对象定义个更新的接口 
  3. ConcreteSubject（具体目标） 
     将有关状态存入各ConcreteObserver对象 当它的状态发送改变时，向它的各个观察者发出通知 
  4. ConcreteObserver（具体观察者） 
维护一个指向ConcreteObserver对象的引用存储有关状态，这些状态应与目标的状态保持一致 实现Observer的更新接口是自身状态与目标的状态保持一致 </code></pre><p>#实例<br>​    说了那么多的名词解释，估计各位看官都有点蒙圈了，别着急，让本人用一个实例给你们演示一番，相信聪明的你们一定会看懂的。</p>
<h4 id="1、首先是观察者Observer"><a href="#1、首先是观察者Observer" class="headerlink" title="1、首先是观察者Observer"></a>1、首先是观察者Observer</h4><pre><code>public class MyObserver implements Observer {

private Handler mHandler;
private String name;
public MyObserver() {
}

public MyObserver(Handler handler, String name) {
    this.mHandler = handler;
    this.name = name;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

@Override
public void update(Observable observable, Object data) {
    sendMessage(MsgBox.MSG_UPDATE_SUCCESS, data);
}
   /**
    *发送消息
    */
private void sendMessage(int what, Object object) {
    Message msg = new Message();
    msg.what = what;
    msg.obj = object;
    mHandler.sendMessage(msg);
}
}</code></pre><h4 id="2、被观察者Observable"><a href="#2、被观察者Observable" class="headerlink" title="2、被观察者Observable"></a>2、被观察者Observable</h4><pre><code> /**
 * 被观察者
  * 
  * @author Silence
  * 
 */
 public class MyObserable extends Observable {

public void postNewPublication(String content) {
    setChanged();
    notifyObservers(content);
}
}</code></pre><h4 id="3、在Activity中使用"><a href="#3、在Activity中使用" class="headerlink" title="3、在Activity中使用"></a>3、在Activity中使用</h4><pre><code> public class SecondActivity extends BaseActivity {
 // 观察者
 private Button mBtnGet, mBtnSetting;
 private TextView mTxtName;
 private EditText mEdtContent;
 // 观察者
 private MyObserver mObserver;
 // 被观察者
 MyObserable obserable = new MyObserable();

@Override
protected void setContentView() {
    setContentView(R.layout.activity_second);
}

@Override
protected void initView() {
    mBtnGet = $(R.id.btn_get);
    mBtnSetting = $(R.id.btn_setting);
    mTxtName = $(R.id.txt_name);
    mEdtContent = $(R.id.edt_content);

}

@Override
protected void initData() {

}

@Override
protected void setListener() {
    mBtnGet.setOnClickListener(this);
    mBtnSetting.setOnClickListener(this);
}

@Override
protected void initLitener(View view) {
    switch (view.getId()) {
    case R.id.btn_get: {
        getData();
    }

        break;
    case R.id.btn_setting: {
        setData();
    }

        break;

    default:
        break;
    }
}

/**
 * 设置数据
 */
protected void setData() {
    String content = mEdtContent.getText().toString().trim();
    mObserver = new MyObserver(mHandler, content);
    obserable.addObserver(mObserver);
    obserable.postNewPublication(content);
}

/**
 * 获取数据
 */
protected void getData() {

    startActivity(new Intent(SecondActivity.this, ThirdActivity.class));
}

/**
 * Handler
 */
Handler mHandler = new Handler() {
    @Override
    public void handleMessage(android.os.Message msg) {
        switch (msg.what) {
        case MsgBox.MSG_UPDATE_SUCCESS:
            String name = (String) msg.obj;
            mTxtName.setText(name);
            break;

        default:
            break;
        }
    };
};

@Override
protected void onDestroy() {
    super.onDestroy();
    obserable.deleteObserver(mObserver);
}

}</code></pre><p>#感谢<br><a href="http://blog.csdn.net/fangchongbory/article/details/7774044" target="_blank" rel="noopener">Android设计模式之观察者模式</a><br><a href="http://www.jianshu.com/p/316147958b67" target="_blank" rel="noopener">Android设计模式（十一）-观察者模式</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/17/Android-studio-3.0配置OpenCV初探/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Silence潇湘夜雨">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Silence潇湘夜雨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/17/Android-studio-3.0配置OpenCV初探/" itemprop="url">Android studio 3.0配置OpenCV初探</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-17T18:53:49+08:00">
                2019-07-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p> 之前一直想对OpenCV进行学习和使用，一直没有实践。这次痛下决心，一定要搞定。经过两天的折腾，遇到各种bug终于搞定了，希望能帮助到初学者，如果里面有那些写的不对的地方，还希望各位看官指正。</p>
<p>#简介</p>
<ul>
<li>准备条件</li>
<li>Android Studio NDK环境搭建</li>
<li>Android Studio OpenCV使用</li>
<li>常见问题</li>
</ul>
<p>##准备条件</p>
<ul>
<li><p><a href="https://pan.baidu.com/s/1pMNObsZ" target="_blank" rel="noopener">openCV压缩包下载</a>密码【7xkh】</p>
</li>
<li><p>Android Studio</p>
<h2 id="NDK环境搭建"><a href="#NDK环境搭建" class="headerlink" title="NDK环境搭建"></a>NDK环境搭建</h2><p>  首先，在Android Studio中打开File-&gt;setting-&gt;Android SDK-&gt;SDK Tools<br>选择CMake和NDK然后点击Apply等待下载完成即可。<br><img src="http://upload-images.jianshu.io/upload_images/1716569-f3db8a0991ccb129.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Android Studio Ndk配置.png"></p>
<ul>
<li><p>首先</p>
<p>  OpenCV是一个基于BSD许可（开源）发行的跨平台计算机视觉库，可以<br>运行在Linux、Windows、Android和Mac OS操作系统上。它轻量级而且<br>高效——由一系列 C 函数和少量 C++ 类，同时提供了Python、Ruby、<br>MATLAB等语言的接口，实现了图像处理和计算机视觉方面的很多通用算法。<br>OpenCV用C++语言编写，它的主要接口也是C++语言，但是依然保留了大量的C语言接口。<br>该库也有大量的Python、Java and MATLAB/OCTAVE（版本2.5）的接口。<br>这些语言的API接口函数可以通过在线文档获得。如今也提供对于C#、Ch、Ruby的支持。</p>
</li>
<li><p>其次</p>
<p>  在Android Studio中新建Project，选中Include c++ support,之后一直默认选择，<br>在C++版本选中c++11,然后finish完成创建，如下图所示。<br><img src="http://upload-images.jianshu.io/upload_images/1716569-3f43cc05dac1b245.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Android Studio创建工程.png"></p>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>然后</p>
<pre><code>   导入OpenCV中的Java库，这个库是OpenCV-android-sdk ---&gt;sdk---&gt;java,选择java之后直接导入。
之后点击Android Studio中的Project Structure，或者直接按ctrl+alt+shift+s打开库依赖面板，
选择moudle Dependency,选择OpenCVLibrary330添加即可，如下图所示。</code></pre><p>   <img src="http://upload-images.jianshu.io/upload_images/1716569-eea5e8241e3995fb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Android Studio 依赖项目.png"></p>
</li>
<li><p>再次</p>
<pre><code>在AS中打开CMakeLists.txt设置OpenCV的路径（此路径为你本地的路径）
# ##################### OpenCV 环境 

#设置OpenCV-android-sdk路径
set( OpenCV_DIR E:/Source/OpenCV-android-sdk/sdk/native/jni )

find_package(OpenCV REQUIRED )
if(OpenCV_FOUND)
include_directories(${OpenCV_INCLUDE_DIRS})
message(STATUS &quot;OpenCV library status:&quot;)
message(STATUS &quot;    version: ${OpenCV_VERSION}&quot;)
message(STATUS &quot;    libraries: ${OpenCV_LIBS}&quot;)
message(STATUS &quot;    include path: ${OpenCV_INCLUDE_DIRS}&quot;)
else(OpenCV_FOUND)
message(FATAL_ERROR &quot;OpenCV library not found&quot;)
endif(OpenCV_FOUND)</code></pre></li>
</ul>
<p><em>注意：</em>  上面的set（ OpenCV_DIR E:/Source/OpenCV-android-sdk/sdk/native/jni）把此路径换成你本地的路径。</p>
<ul>
<li><p>最后</p>
<pre><code> 将OpenCV-android-sdk下面的sdk--&gt;native--&gt;libs下面的文件复制到AS中libs路径下。
然后在app 的build.gradle的android下添加如下代码：

task nativeLibsToJar(type: Jar, description: &apos;create a jar archive of the native libs&apos;) {
destinationDir file(&quot;$buildDir/native-libs&quot;)
baseName &apos;native-libs&apos;
 from fileTree(dir: &apos;libs&apos;, include: &apos;**/*.so&apos;)
into &apos;lib/&apos;
}

tasks.withType(JavaCompile) {</code></pre><p>   ​    compileTask -&gt; compileTask.dependsOn(nativeLibsToJar)</p>
<pre><code> }

最后还需要在dependencies添加 

 implementation fileTree(dir: &quot;$buildDir/native-libs&quot;, include: &apos;native-libs.jar&apos;)</code></pre><p>   _提示 :_到这里OpenCV的环境已经配置完了，下面我们来写一个简单的DEMO验证一下。</p>
</li>
</ul>
<p>##简单DEMO验证<br>_注意 :_本demo只是简单验证，6.0的运行时权限等等没有进行配置。</p>
<ul>
<li><p>新建MainActivity</p>
<pre><code>public class MainActivity extends AppCompatActivity implements 
 View.OnClickListener { 
 //最大</code></pre><p>  ​    private double max_size = 1024;<br>  ​    //回调</p>
<pre><code>private int PICK_IMAGE_REQUEST = 1;
//原图、处理后的图片</code></pre><p>  ​     private ImageView mImgOriginal, mImgDeals;</p>
<pre><code>//原始Bitmap、处理后的Bitmap
private Bitmap mOriginalBitmap,mDealBitmap;
//选择图片、处理</code></pre><p>  ​     private Button mBtnChoose, mBtnDeals;</p>
<pre><code> @Override
 protected void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.activity_main);
onLoadOpenCVLibrary();</code></pre><p>  ​    initView();</p>
<pre><code> }

/**
 * 初始化
      */
         private void initView() {
        mImgDeals = findViewById(R.id.img_deals);
        mImgOriginal = findViewById(R.id.img_original);
        mBtnChoose = findViewById(R.id.btn_choose);
        mBtnDeals = findViewById(R.id.btn_deals);

mBtnDeals.setOnClickListener(this);
mBtnChoose.setOnClickListener(this);

 }</code></pre></li>
</ul>
<pre><code> @Override
public void onClick(View view) {
switch (view.getId()) {
    case R.id.btn_choose: {//选择
        selectImage();
        break;
    }
    case R.id.btn_deals: {//处理
        convertGray();
        break;
    }
}
}

  @Override
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
super.onActivityResult(requestCode, resultCode, data);
if (requestCode == PICK_IMAGE_REQUEST &amp;&amp; resultCode == RESULT_OK &amp;&amp; data != null
        &amp;&amp; data.getData() != null) {
    Uri uri = data.getData();
    try {
        Log.e(&quot;image-tag&quot;, &quot;start to decode selected image now...&quot;);
        InputStream input = getContentResolver().openInputStream(uri);
        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(input, null, options);
        int raw_width = options.outWidth;
        int raw_height = options.outHeight;
        int max = Math.max(raw_width, raw_height);
        int newWidth = raw_width;
        int newHeight = raw_height;
        int inSampleSize = 1;
        if (max &gt; max_size) {
            newWidth = raw_width / 2;
            newHeight = raw_height / 2;
            while ((newWidth / inSampleSize) &gt; max_size || (newHeight / inSampleSize) &gt; max_size) {
                inSampleSize *= 2;
            }
        }

        options.inSampleSize = inSampleSize;
        options.inJustDecodeBounds = false;
        options.inPreferredConfig = Bitmap.Config.ARGB_8888;
        mOriginalBitmap = BitmapFactory.decodeStream(getContentResolver().openInputStream(uri),
                null, options);
        mDealBitmap = BitmapFactory.decodeStream(getContentResolver().openInputStream(uri),
                null, options);
        mImgOriginal.setImageBitmap(mOriginalBitmap);

    } catch (Exception e) {
        e.printStackTrace();
    }
}

}

/**
 * OpenCV库静态加载并初始化
 */
 private void onLoadOpenCVLibrary() {
  boolean load = OpenCVLoader.initDebug();
  if (load) {
    Log.e(&quot;CV&quot;, &quot;Open CV Libraries loaded...&quot;);
   }
 }

 /**
  * 选择图片
  */
private void selectImage() {
Intent intent = new Intent();
intent.setType(&quot;image/*&quot;);
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(Intent.createChooser(intent, &quot;选择图像&quot;), PICK_IMAGE_REQUEST);
 }

/**
 * 转换
 */
 private void convertGray(){
Mat src = new Mat();
Mat temp = new Mat();
Mat dst = new Mat();
Utils.bitmapToMat(mDealBitmap, src);
Imgproc.cvtColor(src, temp, Imgproc.COLOR_BGRA2BGR);
Imgproc.cvtColor(temp, dst, Imgproc.COLOR_BGR2GRAY);
Utils.matToBitmap(dst, mDealBitmap);
mImgDeals.setImageBitmap(mDealBitmap);
 }
 }</code></pre><ul>
<li><p>新建资源文件</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
android:layout_width=&quot;match_parent&quot;
android:layout_height=&quot;match_parent&quot;
android:orientation=&quot;vertical&quot;&gt;

&lt;LinearLayout
  android:layout_width=&quot;wrap_content&quot;
  android:layout_height=&quot;wrap_content&quot;
  android:orientation=&quot;horizontal&quot;&gt;

  &lt;Button
      android:id=&quot;@+id/btn_choose&quot;
      android:layout_width=&quot;wrap_content&quot;
      android:layout_height=&quot;wrap_content&quot;
      android:layout_margin=&quot;10dp&quot;
      android:text=&quot;@string/btn_choose&quot;
      android:textSize=&quot;16sp&quot; /&gt;

  &lt;Button
      android:id=&quot;@+id/btn_deals&quot;
      android:layout_width=&quot;wrap_content&quot;
      android:layout_height=&quot;wrap_content&quot;
      android:layout_margin=&quot;10dp&quot;
      android:text=&quot;@string/btn_deals&quot;
      android:textSize=&quot;16sp&quot; /&gt;

&lt;/LinearLayout&gt;

&lt;ImageView
  android:id=&quot;@+id/img_original&quot;
  android:layout_width=&quot;200dp&quot;
  android:layout_height=&quot;200dp&quot;
  android:layout_gravity=&quot;center&quot;
  android:layout_margin=&quot;16dp&quot;
  android:scaleType=&quot;fitCenter&quot;
  android:src=&quot;@mipmap/ic_launcher&quot; /&gt;

&lt;ImageView
  android:id=&quot;@+id/img_deals&quot;
  android:layout_width=&quot;200dp&quot;
  android:layout_height=&quot;200dp&quot;
  android:layout_gravity=&quot;center&quot;
  android:layout_margin=&quot;16dp&quot;
  android:scaleType=&quot;fitCenter&quot;
  android:src=&quot;@mipmap/ic_launcher&quot; /&gt;
&lt;/LinearLayout&gt;</code></pre></li>
<li><p>资源文件的效果如下图所示<br><img src="http://upload-images.jianshu.io/upload_images/1716569-1d4ceece061a91f2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="AS资源文件.png"></p>
</li>
<li><p>最终运行的效果如下图所示<br><img src="http://upload-images.jianshu.io/upload_images/1716569-b43e1f03a33a4539.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="AS效果图.png"></p>
</li>
</ul>
<h1 id="感言"><a href="#感言" class="headerlink" title="感言"></a>感言</h1><ul>
<li>经过两天的折腾，遇到了各种Bug，终于搞定的，除了这种方式添加OpenCV之外还有添加.mk文件的方式等等。这里就不多做介绍了，想了解的看官可以去自行搜索。</li>
<li>感谢gloomyfish的<a href="http://blog.csdn.net/jia20003/article/details/53126321" target="_blank" rel="noopener">OpenCV On Android开发 - Android Studio上环境配置</a><ul>
<li><a href="https://github.com/muyishuangfeng/OpenCV" target="_blank" rel="noopener">github目录</a></li>
<li><a href="https://muyishuangfeng.github.io" target="_blank" rel="noopener">个人博客主页</a></li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/17/Android-TextView-点击超链接跳转实现/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Silence潇湘夜雨">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Silence潇湘夜雨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/17/Android-TextView-点击超链接跳转实现/" itemprop="url">Android TextView 点击超链接跳转实现</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-17T18:50:46+08:00">
                2019-07-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="前提：之前遇到过一次textview显示url的方式，但是并未深入探究。但是，上个礼拜一个朋友问我如何在textview上面加载url，并且点击跳转到指定页面。当时对这个比较感兴趣也就深入探究了一番。虽然实现了，但是效果并不理想。如果哪位看官对这一点，理解的比较深入，请告诉我一声，谢谢了。"><a href="#前提：之前遇到过一次textview显示url的方式，但是并未深入探究。但是，上个礼拜一个朋友问我如何在textview上面加载url，并且点击跳转到指定页面。当时对这个比较感兴趣也就深入探究了一番。虽然实现了，但是效果并不理想。如果哪位看官对这一点，理解的比较深入，请告诉我一声，谢谢了。" class="headerlink" title="前提：之前遇到过一次textview显示url的方式，但是并未深入探究。但是，上个礼拜一个朋友问我如何在textview上面加载url，并且点击跳转到指定页面。当时对这个比较感兴趣也就深入探究了一番。虽然实现了，但是效果并不理想。如果哪位看官对这一点，理解的比较深入，请告诉我一声，谢谢了。"></a>前提：之前遇到过一次textview显示url的方式，但是并未深入探究。但是，上个礼拜一个朋友问我如何在textview上面加载url，并且点击跳转到指定页面。当时对这个比较感兴趣也就深入探究了一番。虽然实现了，但是效果并不理想。如果哪位看官对这一点，理解的比较深入，请告诉我一声，谢谢了。</h3><h3 id="首先"><a href="#首先" class="headerlink" title="首先"></a>首先</h3><ul>
<li>对TextView属性比较熟悉的开发者应该都知道TextView有一个叫做autoLink的属性，可以将符合指定格式的文本转换为可单击的超链接形式，在帮助文档中也可以发现Android给我们提供了如下几种格式：</li>
</ul>
<blockquote>
<p>1、none：表示不进行任何匹配，默认；<br>2、Web：表示匹配Web Url，    如： 连接地址为<a href="http://www.baidu.com会成为可单击跳转的超链接；" target="_blank" rel="noopener">http://www.baidu.com会成为可单击跳转的超链接；</a><br>3、Email：表示匹配邮件地址， 如：邮件地址为<a href="mailto:xx@sina.com" target="_blank" rel="noopener">xx@sina.com</a>会成为可单击的超链接；<br>4、Phone：表示匹配电话号码，如：点击号码10000会跳到拨号界面；<br>5、Map：表示匹配地图地址；<br>6、All：表示将会匹配web、email、phone、map；</p>
</blockquote>
<p><strong>如下图所示</strong><br><img src="http://upload-images.jianshu.io/upload_images/1716569-6cd437c60149fa2a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="TextView autoLink.png"></p>
<pre><code>&lt;TextView
   android:layout_width=&quot;match_parent&quot;
   android:layout_height=&quot;wrap_content&quot;
   android:gravity=&quot;center&quot;
   android:layout_margin=&quot;16dp&quot;
   android:text=&quot;123&quot;
   android:autoLink=&quot;phone&quot;/&gt;</code></pre><ul>
<li>其中android:autoLink=” “就是加载的属性</li>
</ul>
<h3 id="其次"><a href="#其次" class="headerlink" title="其次"></a>其次</h3><ul>
<li>要实现点击textview中url的跳转到指定功能页面的功能，有这样两种功能</li>
</ul>
<blockquote>
<p>1、直接跳转到指定页面（可以直接自定义页面）；<br>2、通过手机浏览器到指定页面</p>
</blockquote>
<p><strong>首先，来看跳转到指定页面的写法</strong></p>
<pre><code>public class MainActivity extends AppCompatActivity {

TextView mTxtWeb;
CharSequence mContent;

@Override
protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_main);
  initView();
}

/**
 * 初始化控件
 */
private void initView() {
  mTxtWeb = (TextView) findViewById(R.id.txt_web);
  String htmlLinkText = &quot;天下&quot;+&quot;www.google.com&quot;+&quot;为公&quot;;
  mTxtWeb.setText(Html.fromHtml(htmlLinkText));
  mTxtWeb.setMovementMethod(LinkMovementMethod.getInstance());
  CharSequence text = mTxtWeb.getText();
  if (text instanceof Spannable) {
      int end = text.length();
      Spannable sp = (Spannable) mTxtWeb.getText();
      URLSpan[] urls = sp.getSpans(0, end, URLSpan.class);
      SpannableStringBuilder style = new SpannableStringBuilder(text);
      style.clearSpans();
      for (final URLSpan url : urls) {
            //最主要的一点
          CustomClickUrlSpan myURLSpan = new CustomClickUrlSpan(url.getURL(), new CustomClickUrlSpan.OnLinkClickListener() {
              @Override
              public void onLinkClick(View view) {
                  Intent intent= new Intent(this,WebActivity.class);
                  intent.putExtra(&quot;url&quot;,url.getURL());
                  startActivity(intent);
              }
          });
          style.setSpan(myURLSpan, sp.getSpanStart(url), sp.getSpanEnd(url), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
      }
      mTxtWeb.setText(style);
  }
 }</code></pre><ul>
<li><p>其中CustomClickUrlSpan,是点击url跳转，其中传入一个url，一个自定义接口，达到跳转到指定页面的目的。</p>
<pre><code> public class CustomClickUrlSpan extends ClickableSpan {
 private String url;
 private OnLinkClickListener mListener;

 public CustomClickUrlSpan(String url, OnLinkClickListener listener) {
  this.url=url;
  this.mListener=listener;
}

 @Override
public void onClick(View widget) {</code></pre><p> ​     if (mListener!=null){<br> ​         mListener.onLinkClick(widget);<br> ​     }<br> ​    }</p>
<pre><code>/**</code></pre><p> ​    * 跳转链接接口<br> ​    */</p>
<pre><code>public interface OnLinkClickListener{</code></pre><p> ​     void onLinkClick(View view);</p>
<pre><code>}</code></pre><p> ​    }</p>
</li>
<li><p>其中ClicableSpan是系统的方法，其中定义了一个抽象点击的方法（来看看系统源码）</p>
<pre><code>public abstract class ClickableSpan extends CharacterStyle implements UpdateAppearance {
 private static int sIdCounter = 0;

 private int mId = sIdCounter++;

/**
 * Performs the click action associated with this span.
 * 这个是点击方法
 */
public abstract void onClick(View widget);

/**
 * Makes the text underlined and in the link color.
 */
@Override
public void updateDrawState(TextPaint ds) {
   //这个是设置url颜色
  ds.setColor(ds.linkColor);
   //这个是设置是否有下划线
  ds.setUnderlineText(true);
}

/**
 * Get the unique ID for this span.
 *
 * @return The unique ID.
 * @hide
 */
public int getId() {
  return mId;
  }
}</code></pre></li>
<li><p>当然也有简单的写法，比如：</p>
<pre><code>/**
 * 点击跳转
 */
private class MyURLSpan extends ClickableSpan {

  private String mUrl;

  MyURLSpan(String url) {
      mUrl = url;
  }

  @Override
  public void onClick(View widget) {
      Toast.makeText(MainActivity.this, mContent.toString(), Toast.LENGTH_LONG).show();
  }
}</code></pre></li>
<li><p>第二种用的内部类的方法，但是会有局限性，会让主页变得太繁琐，也会让跳转受限，为了让代码看着清晰简洁，所以推荐使用第一种方法。（个人理解，不对的还请指正）</p>
</li>
</ul>
<p><strong>其次，通过浏览器跳转到指定页面（并取消下划线）</strong></p>
<pre><code>public class CustomUrlSpan extends UnderlineSpan implements Parcelable {


String url;

public CustomUrlSpan(String url) {
    this.url = url;

}

@Override
public void updateDrawState(TextPaint ds) {
    super.updateDrawState(ds);
    if (ds != null) {
        ds.setUnderlineText(false);
    }
}


@Override
public int describeContents() {
    return 0;
}

@Override
public void writeToParcel(Parcel dest, int flags) {
    dest.writeString(this.url);
}

protected CustomUrlSpan(Parcel in) {
    super(in);
    this.url = in.readString();
}

public static final Creator&lt;CustomUrlSpan&gt; CREATOR = new Creator&lt;CustomUrlSpan&gt;() {
    public CustomUrlSpan createFromParcel(Parcel source) {
        return new CustomUrlSpan(source);
    }

    public CustomUrlSpan[] newArray(int size) {
        return new CustomUrlSpan[size];
    }
};
}</code></pre><ul>
<li><p>一定要实现Parcelable接口，要不会有错误提示（下面是activity中的用法，其中通过浏览器跳转到指定页面，并且取消了下划线）。</p>
<pre><code>/**
 * 初始化控件
 */
private void initView() {
  mTxtWeb = (TextView) findViewById(R.id.txt_web);
  String htmlLinkText = &quot;天下&quot;+&quot;www.google.com&quot;+&quot;为公&quot;;
  mTxtWeb.setText(Html.fromHtml(htmlLinkText));
  mTxtWeb.setMovementMethod(LinkMovementMethod.getInstance());
  CharSequence text = mTxtWeb.getText();
  if (text instanceof Spannable) {
      int end = text.length();
      Spannable sp = (Spannable) mTxtWeb.getText();
      URLSpan[] urls = sp.getSpans(0, end, URLSpan.class);
      SpannableStringBuilder style = new SpannableStringBuilder(text);
      style.clearSpans();
      for (final URLSpan url : urls) {
          CustomUrlSpan myURLSpan = new CustomUrlSpan(url.getURL());
          style.setSpan(myURLSpan, sp.getSpanStart(url), sp.getSpanEnd(url), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
      }
      mTxtWeb.setText(style);
  }
}</code></pre></li>
</ul>
<h3 id="最后（还有一点比较困惑）"><a href="#最后（还有一点比较困惑）" class="headerlink" title="最后（还有一点比较困惑）"></a>最后（还有一点比较困惑）</h3><ul>
<li>UnderlineSpan和ClickableSpan都有设置取消下划线的方法（updateDrawState），重写了方法之后，UnderlineSpan取消了下划线，但是ClickableSpan却取消不了这一点比较困惑。</li>
<li>看源码可以看到UnderlineSpan和ClickableSpan都是继承CharacterStyle，并且有一个抽象方法updateDrawState（），那么直接继承CharacterStyle，然后再自定义一个跳转接口可否实现跳转到指定接口呢，经过试验之后还是会有些许不尽如人意。如果哪位仁兄对这一点比较了解，还请告诉我一声，不胜感激。</li>
</ul>
<h2 id="感悟"><a href="#感悟" class="headerlink" title="感悟"></a>感悟</h2><ul>
<li><p><strong>对于我们来说，不管做什么事情应该尽自己最大努力去做好，事事都怕认真二字</strong></p>
</li>
<li><p>引用知乎上面的一段话就是：<br><strong>如果天空是黑暗的，那就摸黑生存；如果发出声音是危险的，那就保持沉默；如果自觉无力发光的，那就蜷伏于墙角。但不要习惯了黑暗就为黑暗辩护；不要为自己的苟且而得意；不要嘲讽那些比自己更勇敢热情的人们。我们可以卑微如尘土，不可扭曲如蛆虫。——季业</strong></p>
<ul>
<li><strong>推荐一个探讨技术的技术群（493180098）</strong></li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/17/Android 自定义接口/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Silence潇湘夜雨">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Silence潇湘夜雨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/17/Android 自定义接口/" itemprop="url">Android 自定义接口</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-17T18:48:47+08:00">
                2019-07-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h3><p> <strong>1、各位看官大家好，小可今天又来装，啊呸，又来写干货来了。在自定义Android接口之前先要搞清楚什么是接口</strong><br><strong>2、接口定义</strong></p>
<ul>
<li><p>大家都知道Android是基于Java语言开发的，嗯，之前是，当然现在也有Kotin，今天主要讲解Java方面。</p>
<ul>
<li>接口（英文：Interface），在JAVA编程语言中是一个抽象类型，是抽象方法的集合，接口通常以interface来声明。一个类通过继承接口的方式，从而来继承接口的抽象方法。</li>
<li>接口并不是类，编写接口的方式和类很相似，但是它们属于不同的概念。类描述对象的属性和方法。接口则包含类要实现的方法。除非实现接口的类是抽象类，否则该类要定义接口中的所有方法。</li>
<li>接口无法被实例化，但是可以被实现。一个实现接口的类，必须实现接口内所描述的所有方法，否则就必须声明为抽象类。另外，在 Java 中，接口类型可用来声明一个变量，他们可以成为一个空指针，或是被绑定在一个以此接口实现的对象。</li>
</ul>
<p><strong>3、实现方法</strong></p>
<ul>
<li>相信上面对接口的说明大家都可以理解，但是，自定义接口又是什么样子的呢，相信还是比较抽象的，所以今天就小可就在此举一个例子来介绍一下<br>###首先</li>
</ul>
</li>
<li><p>先分析一下，我们今天要自定义的接口要有什么诉求（<strong>即要实现什么功能</strong>）自定义接口是为了更好的传递我们想要传递的值。</p>
<ul>
<li><p>大家都知道Recyclerview没有自带点击事件，今天就以Recyclerview的点击事件为例，来介绍一下自定义接口</p>
</li>
<li><p>定义一个接口类<br>​         </p>
<p> public interface OnItemClickListener {<br>   //第一个参数是适配器的item，第二个参数是位置</p>
<ul>
<li>短按事件<br>void OnItemClick(View view,int position);<br>长按事件<br>void OnItemLongClick(View view,int position);<br>}</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="其次"><a href="#其次" class="headerlink" title="其次"></a>其次</h3><ul>
<li>要实现Recyclerview的点击事件，当然要定义一个适配器了</li>
</ul>
<pre><code>  public class CustomAdapter extends RecyclerView.Adapter
    &lt;CustomAdapter.CustomViewHolder&gt; {

   private List&lt;CustomBean&gt; mList;
   private Context mContext;
   private LayoutInflater mInflater;
   private OnItemClickListener mOnItemClickListener;

public CustomAdapter(List&lt;CustomBean&gt; mList, Context context) {
    this.mList = mList;
    this.mContext = context;
    this.mInflater = LayoutInflater.from(mContext);
}

@Override
public CustomViewHolder onCreateViewHolder(ViewGroup 
parent, int viewType) {
    View view = mInflater.inflate(R.layout.item_custom_layout, 
parent, false);
    CustomViewHolder viewHolder = new CustomViewHolder(view);
    return viewHolder;
}

@Override
public void onBindViewHolder( CustomViewHolder holder, int position) {
    holder.mTxtItemTitle.setText(mList.get(position).getTitle());
    holder.mTxtItemContent.setText(mList.get(position).getContent());
    //设置点击事件
   setUIEvent(holder);
}

@Override
public int getItemCount() {
    return mList==null?0:mList.size();
}

class CustomViewHolder extends RecyclerView.ViewHolder {

    TextView mTxtItemTitle, mTxtItemContent;

    public CustomViewHolder(View itemView) {
        super(itemView);
        mTxtItemTitle = itemView.findViewById(R.id.txt_item_title);
        mTxtItemContent = itemView.findViewById(R.id.txt_item_content);
    }
}

/**
 * 设置点击事件
 * @param holder
 */
public void setUIEvent(final CustomViewHolder holder){
    //点击事假，首先判断是否为空，不为空的时候再进行操作
    if (mOnItemClickListener != null) {
        holder.itemView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                int layoutPosition = holder.getLayoutPosition();
                mOnItemClickListener.OnItemClick(holder.itemView, layoutPosition);
            }
        });
        holder.itemView.setOnLongClickListener(new View.OnLongClickListener() {
            @Override
            public boolean onLongClick(View view) {
                int layoutPosition = holder.getLayoutPosition();
                mOnItemClickListener.OnItemLongClick(holder.itemView, layoutPosition);
                return false;
            }
        });
    }
}

/**
 * 提供给Activity或者Fragment调用的
 *
 * @param onItemClickListener
 */
public void setOnItemClickListener(OnItemClickListener onItemClickListener) {
    this.mOnItemClickListener = onItemClickListener;
}
 }</code></pre><p><strong>在适配器里面对接口的调用已经很清晰明了了，相信各位看官已经看懂了吧。</strong></p>
<h3 id="再次"><a href="#再次" class="headerlink" title="再次"></a>再次</h3><ul>
<li><p>当然，现在就是在Activity里面怎么实现接口回调了</p>
<pre><code>public class ThirdActivity extends BaseActivity implements 
 OnItemClickListener{

 RecyclerView mRecyclerView;
 List&lt;CustomBean&gt;mList=new ArrayList&lt;&gt;();
 CustomAdapter mAdapter;

@Override
public void setContentView() {
  setContentView(R.layout.activity_third);
}

@Override
public void initView() {
  mRecyclerView = $(R.id.recyclerView);
  mRecyclerView.setLayoutManager(new 
LinearLayoutManager(this));
  mAdapter= new CustomAdapter(mList,this);
  mAdapter.setOnItemClickListener(this);
  mRecyclerView.setAdapter(mAdapter);

 }

 @Override
public void initData() {

  }

@Override
 public void initClick(View view) {

 }

@Override
public void setListener() {

}

@Override
public void OnItemClick(View view, int position) {
  ToastUtils.showMessage(this,getResources().getString(R.string.click_item));
}

@Override
public void OnItemLongClick(View view, int position) {

}
}</code></pre></li>
<li><p>到此，自定义接口形成了一个圆满的回调，当然还有其他回调写法，再举一个例子讲解一下。依然是在适配器中实现</p>
</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/1716569-036829b6b279f332.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="适配器图.png"></p>
<ul>
<li><p>来看图，这个就是上面实现的适配器图片，然后我们想对<strong>内容</strong>这个字段加上点击事件该怎么做呢？相信聪明如你的看官已经想到了。即对<strong>内容</strong>这个TextView加上点击事件即可，话不多说上代码：</p>
<pre><code>/**
  * 点击内容的接口
  */
public interface OnItemContentClickListener{
 //点击事件
  void OnContentClick(int position);
  //长按事件
  void OnContentLongClick(int position);
}</code></pre></li>
<li><p>由上面的接口可以看到此接口主要实现了点击内容区域获取内容对应的位置的数据（然后实现跳转功能即可）</p>
<pre><code>/**
 * 点击内容那个TextView对应的调用
 * @param onContentListener
 */
  public void setOnContentListener(OnItemContentClickListener 
onContentListener){
 this.mOnItemContentClickListener=onContentListener;
}</code></pre></li>
<li><p>最后在Activity中进行调用了</p>
<pre><code> mAdapter.setOnContentListener(new 
CustomAdapter.OnItemContentClickListener() {</code></pre><p>  @Override<br> public void OnContentClick(int position) {<br>  ToastUtils.showMessage(ThirdActivity.this,<br> ​               getResources().getString(R.string.click_item_content));<br> ​    }</p>
<pre><code>    @Override
    public void OnContentLongClick(int position) {

    }
});</code></pre></li>
<li><p>可以看到这里是采用匿名内部来的方式来实现的，这样写可以更直观一点，但是看着比较乱一点（仁者见仁，智者见智）</p>
</li>
</ul>
<h3 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h3><ul>
<li>当然，自定义接口还有很多写法，还需要大家去探索，我这里只是抛砖引玉。<ul>
<li>针对自定义接口今天就讲到这里，希望对大家有所帮助，如果有哪里讲的不到位的地方，还请大家见谅，并且告诉我一声，谢谢。</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/17/Android-工具类/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Silence潇湘夜雨">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Silence潇湘夜雨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/17/Android-工具类/" itemprop="url">Android 工具类</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-17T18:44:29+08:00">
                2019-07-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p><strong>相信用过工具类的各位仁兄都觉得工具类好用，小弟不才，今天斗胆拿出自己感觉比较顺手的工具类。</strong></p>
<hr>
<p>##1、Activity控制类</p>
<pre><code>public class ActivityCollector{
    //activity集合
 public static List&lt;Activity&gt; mActList = new ArrayList&lt;Activity&gt;();
        /**
          * 添加Activity
          * 
          * @param activity
          */

   public static void addActivity(Activity activity){
      mActList.add.add(activity);
    }
    }
         /**
           * 移除Activity
           */
          public static void removeActivity(Activity activity) {
            mActList.remove(activity);
         }

        /**
          * 退出
          */
         public static void finishAll() {
            for (Activity activity : mActList) {
              if (!activity.isFinishing()) {

                  activity.finish();
           }
         }
       }

}</code></pre><h2 id="2、应用市场管理类"><a href="#2、应用市场管理类" class="headerlink" title="2、应用市场管理类"></a>2、应用市场管理类</h2><pre><code>  public class MarketUtils {
     // 360手机助手
    public static final String MARKET = &quot;com.qihoo.appstore&quot;;
    // 淘宝手机助手
    public static final String MARKET_TAOBAO = &quot;com.taobao.appcenter&quot;;
    // 应用宝
    public static final String MARKET_QQDOWNLOADER = &quot;com.tencent.Android.qqdownloader&quot;;
    // 安卓市场
    public static final String MARKET_HIAPK = &quot;com.hiapk.marketpho&quot;;
    // 安智市场
    public static final String MARKET_GOAPK = &quot;cn.goapk.market&quot;;
    // 包名
    public static final String APP_PACKAGE_NAME = &quot;com.*.*&quot;;

   public MarketUtils() {
    throw new AssertionError();
}
  /**
    * 跳转到应用市场
    * 
    * @param appPkg
    *            ：上传到应用市场上app的包名,不是本项目的包名
    * @param marketPkg
    *            ：应用市场的包名
    */
    public static void goToMarket(Context context, String packageName) {
    Uri uri = Uri.parse(&quot;market://details?id=&quot; + packageName);
    Intent goToMarket = new Intent(Intent.ACTION_VIEW, uri);
    try {
        context.startActivity(goToMarket);
    } catch (ActivityNotFoundException e) {
    }
}

   /**
     * 启动App
     * 
     * @param context
     */
   public static void launchapp(Context context) {
    // 判断是否安装过App，否则去市场下载
    if (isAppInstalled(context, APP_PACKAGE_NAME)) {
        context.startActivity(context.getPackageManager()
            .getLaunchIntentForPackage(APP_PACKAGE_NAME));
    } else {
        goToMarket(context, APP_PACKAGE_NAME);
    }
}

     /**
       * 检测某个应用是否安装
       * 
       * @param context
       * @param packageName
       * @return
       */
   public static boolean isAppInstalled(Context context, String packageName) {
    try {
        context.getPackageManager().getPackageInfo(packageName, 0);
        return true;
    } catch (NameNotFoundException e) {
        return false;
    }
}
    /**
       * 判断市场是否存在的方法
       * 
       * @param context
       * @param packageName
       *            应用市场包名
       * @return true or false
       */
  public static boolean isAvilible(Context context, String packageName) {
    final PackageManager packageManager = context.getPackageManager();// 获取packagemanager
    List&lt;PackageInfo&gt; packageInfo = packageManager.getInstalledPackages(0);// 获取所有已安装程序的包信息
    List&lt;String&gt; NameList = new ArrayList&lt;String&gt;();// 用于存储所有已安装程序的包名
    // 从packageInfo中取出包名，放入NameList中
    if (packageInfo != null) {
        for (int i = 0; i &lt; packageInfo.size(); i++) {
            String pn = packageInfo.get(i).packageName;
            NameList.add(pn);
        }
    }
    return NameList.contains(packageName);// 判断pName中是否有目标程序的包名，有TRUE，没有FALSE
}
 } </code></pre><h2 id="3、Toast工具类（不建议使用，请看另外一篇-Android-自定义Toast，并且勘误"><a href="#3、Toast工具类（不建议使用，请看另外一篇-Android-自定义Toast，并且勘误" class="headerlink" title="3、Toast工具类（不建议使用，请看另外一篇[Android 自定义Toast，并且勘误"></a>3、<del>Toast工具类</del>（不建议使用，请看另外一篇[Android 自定义Toast，并且勘误</h2><p>Android工具类里面的ToastUtils]()）<br>​      public class ToastUtils {~<br>​       public static Toast toast;<br>​       public static boolean isShow = true;</p>
<pre><code>   private ToastUtils() {
    // 不能被实例化
    throw new UnsupportedOperationException(&quot;cannot be instantiated&quot;);
}

    public static void showToast(Context context, String message) {
    if (toast == null) {
        toast = Toast.makeText(context, message, Toast.LENGTH_SHORT);
    } else {
        toast.setText(message);
    }
    toast.show();
}
/**
 * 屏幕中间位置显示短时间Toast
 * 
 * @param context
 * @param msg
 */
public static void ToastShortCenter(Context context, String msg) {
    if (isShow) {
        if (context != null) {
            Toast toast = Toast.makeText(context, msg, Toast.LENGTH_SHORT);
            toast.setGravity(Gravity.CENTER, 0, 0);
            toast.show();
        }
    }

}

/**
 * 屏幕中心位置长时间显示Toast
 * 
 * @param context
 * @param message
 */
public static void ToastLongCenter(Context context, String message) {
    if (isShow) {
        if (context != null) {
            Toast toast = Toast.makeText(context, message,
                    Toast.LENGTH_LONG);
            toast.setGravity(Gravity.CENTER, 0, 0);
            toast.show();
        }
    }
}

/**
 * 自定义显示Toast时间
 * 
 * @param context
 * @param message
 * @param duration
 */
public static void ToastShow(Context context, String message, int duration) {
    if (isShow)
        Toast.makeText(context, message, duration).show();
}
}</code></pre><h2 id="4、KeyBoardUtils"><a href="#4、KeyBoardUtils" class="headerlink" title="4、KeyBoardUtils"></a>4、KeyBoardUtils</h2><p>​      public class KeyBoardUtils {</p>
<pre><code>public KeyBoardUtils() {
    throw new AssertionError();
}

/**
 * 打卡软键盘
 * 
 * @param mEditText
 *            输入框
 * @param mContext
 *            上下文
 */
public static void openKeybord(EditText mEditText, Context mContext) {
    InputMethodManager imm = (InputMethodManager) mContext
            .getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.showSoftInput(mEditText, InputMethodManager.RESULT_SHOWN);
    imm.toggleSoftInput(InputMethodManager.SHOW_FORCED,
            InputMethodManager.HIDE_IMPLICIT_ONLY);
}

/**
 * 关闭软键盘
 * 
 * @param mEditText
 *            输入框
 * @param mContext
 *            上下文
 */
public static void closeKeybord(EditText mEditText, Context mContext) {
    InputMethodManager imm = (InputMethodManager) mContext
            .getSystemService(Context.INPUT_METHOD_SERVICE);

    imm.hideSoftInputFromWindow(mEditText.getWindowToken(), 0);
}
}</code></pre><h2 id="5、AES工具类"><a href="#5、AES工具类" class="headerlink" title="5、AES工具类"></a>5、AES工具类</h2><p>​      public class AESUtils {</p>
<pre><code>// 密钥算法
private static final String KEY_ALGORITHM = &quot;AES&quot;;
// AES/CBC/PKCS7Padding 分别对应 加密||解密算法、工作模式、填充方式
private static final String CIPHER_ALGORITHM = &quot;AES/CBC/PKCS7Padding&quot;;
// 定义自己的秘钥
public final static String SECRETKEY = &quot;A9e4/vnQTrKF6otAGbM6zGsulKEL7b3x&quot;;
// 位移量
public final static String DISPLACEMENT = &quot;9mg+!7ed8b36*w`X&quot;;

/**
 * 获取KEY
 * 
 * @return
 * @throws Exception
 */
private static byte[] getKey() throws Exception {
    return SECRETKEY.getBytes(Charset.forName(&quot;UTF-8&quot;));
}

/**
 * 加密
 * 
 * @param toEncrypt
 *            文本
 * @return
 * 
 *         加密返回数组
 * @throws Exception
 */
@SuppressLint(&quot;TrulyRandom&quot;)
public static byte[] Encrypt(String toEncrypt) throws Exception {
    // 秘钥
    Key secretKey = new SecretKeySpec(getKey(), KEY_ALGORITHM);
    // libs中bcprov的支持,bouncycastle支持 64 位密钥
    Security.addProvider(new BouncyCastleProvider());
    Cipher cipher = Cipher.getInstance(CIPHER_ALGORITHM);
    // 获取位移，并初始化
    final byte[] data = DISPLACEMENT.getBytes();
    IvParameterSpec mIvParameterSpec = new IvParameterSpec(data);
    // 用 iv 初始化
    cipher.init(Cipher.ENCRYPT_MODE, secretKey, mIvParameterSpec);

    final byte[] mEncrypted = cipher.doFinal(toEncrypt.getBytes(Charset
            .forName(&quot;UTF-8&quot;)));

    final byte[] mSpecEncrypted = new byte[data.length + mEncrypted.length];
    System.arraycopy(data, 0, mSpecEncrypted, 0, data.length);
    System.arraycopy(mEncrypted, 0, mSpecEncrypted, data.length,
            mEncrypted.length);
    return mSpecEncrypted;
}

/**
 * 加密数据
 * 
 * @param encryption
 * 
 *            文本
 * @return
 * 
 *         返回字符串
 * @throws Exception
 */
public static String Encryption(String encryption) throws Exception {
    byte[] entroyResult = Encrypt(encryption);
    String result = new String(Base64.encode(entroyResult, 0), &quot;UTF-8&quot;);
    return result;
}

/**
 * 解密数据
 * 
 * @param toDecrypt
 *            文本
 * @return &lt;br&gt;
 *         返回字符串
 * @throws Exception
 */
public static String Decrypt(String decrypt) throws Exception {
    byte[] data = Base64.decode(decrypt, 0);
    // 秘钥
    Key secretKey = new SecretKeySpec(getKey(), KEY_ALGORITHM);
    Security.addProvider(new BouncyCastleProvider());
    Cipher cipher = Cipher.getInstance(CIPHER_ALGORITHM);
    final byte[] mData = DISPLACEMENT.getBytes();
    IvParameterSpec mIvParameterSpec = new IvParameterSpec(mData);
    cipher.init(Cipher.DECRYPT_MODE, secretKey, mIvParameterSpec);
    final byte[] mEncrypted = cipher.doFinal(data);
    // 结果
    final byte[] result = new byte[mEncrypted.length - mData.length];
    System.arraycopy(mEncrypted, mData.length, result, 0, result.length);
    return new String(result);
}
}</code></pre><p>##6、APP版本工具类<br>​      public class VersionUtil {</p>
<pre><code>/**
 * 获取应用程序名称
 * 
 * @param context
 * @return
 */
public static String getAppName(Context context) {
    try {
        PackageManager packageManager = context.getPackageManager();
        PackageInfo packageInfo = packageManager.getPackageInfo(
                context.getPackageName(), 0);
        int labelRes = packageInfo.applicationInfo.labelRes;
        return context.getResources().getString(labelRes);
    } catch (PackageManager.NameNotFoundException e) {
        e.printStackTrace();
    }
    return null;
}

/**
 * 获取版本号
 * 
 * @param context
 * @return 当前应用的版本号
 */
public static String getVersion(Context context) {
    try {
        PackageManager manager = context.getPackageManager();
        PackageInfo info = manager.getPackageInfo(context.getPackageName(),
                0);
        String version = info.versionName;
        return version;
    } catch (PackageManager.NameNotFoundException e) {
        e.printStackTrace();
        return &quot;&quot;;
    }
}

/**
 * 版本比较
 * 
 * @param nowVersion
 *            app版本
 * @param serverVersion
 *            服务器版本
 * @return
 */
public static boolean compareVersion(String nowVersion, String serverVersion) {
    if (nowVersion != null &amp;&amp; serverVersion != null) {
        String[] nowVersions = nowVersion.split(&quot;\\.&quot;);
        String[] serverVersions = serverVersion.split(&quot;\\.&quot;);
        if (nowVersion != null &amp;&amp; serverVersion != null
                &amp;&amp; nowVersions.length &gt; 1 &amp;&amp; serverVersions.length &gt; 1) {
            int nowVersionFirst = Integer.parseInt(nowVersions[0]);
            int serverVersionFirst = Integer.parseInt(serverVersions[0]);
            int nowVersionSecond = Integer.parseInt(nowVersions[1]);
            int serverVersionSecond = Integer.parseInt(serverVersions[1]);
            if (nowVersionFirst &lt; serverVersionFirst) {
                return true;
            } else if (nowVersionFirst == serverVersionFirst
                    &amp;&amp; nowVersionSecond &lt; serverVersionSecond) {
                return true;
            }
        }
    }
    return false;
}
}</code></pre><p>##7、GlideUtils<br><strong>话说用开源库的时候应该自行封装一下，为了后面修改方便。</strong><br>​      public class GlideUtils {</p>
<pre><code>public GlideUtils(){
    throw new AssertionError();
}

/**
 * 显示照片
 * @param context
 * @param imageView
 * @param url
 */
public static void displays(Context context, ImageView imageView, Object url) {
    Glide.with(context).load(url).skipMemoryCache(true)  //跳过内存缓存
            .diskCacheStrategy(DiskCacheStrategy.ALL) //硬盘缓存全部
           .into(imageView);
}

/**
 * 显示图片
 * @param context
 * @param imageView
 * @param url
 * @param tag
 */
public static void display(Context context, ImageView imageView, String url, Object tag) {
    Glide.with(context).load(url).
            error(R.drawable.ic_error).placeholder(R.drawable.ic_progress).into(imageView);
}

public static void display(Context context, ImageView imageView, String url, int progressId) {
    RequestManager manager = Glide.with(context);
    DrawableTypeRequest&lt;String&gt; load = manager.load(url);
    load.error(R.drawable.ic_error).placeholder(new ColorDrawable(Color.GRAY)).into
            (imageView);
    if (progressId != -1) {
        load.placeholder(progressId);
    }
}

public static void display(Context context, ImageView imageView, String url) {
    display(context, imageView, url, -1);
}

public static void cancel(Context context) {
}
/**
 * 设置磁盘缓存大小和位置,这里设置150M
 */
public static void setInnerCacheDir(Context context){
    GlideBuilder builder = new GlideBuilder(context);
    builder.setDiskCache(new InternalCacheDiskCacheFactory(context, &quot;ImgCache&quot;, 150 * 1024 * 1024));
}

/**
 * 可以用ExternalCacheDiskCacheFactory来把你的磁盘缓存放到sd卡的公共缓存目录上,这里默认设置150M
 */
public static void setDiskCacheDir(Context context){
    GlideBuilder builder = new GlideBuilder(context);
    builder.setDiskCache( new ExternalCacheDiskCacheFactory(context, &quot;ImgCache&quot;, 150 * 1024 * 1024));
}

/**
 * 清除缓存
 */
public static  void clearCache(final Context context){
    Glide.get(context).clearMemory(); //清理内存缓存
    new Thread(new Runnable() {
        @Override
        public void run() {
            Glide.get(context).clearDiskCache(); //清理磁盘缓存
        }
    }).start();
}
}</code></pre><p>##8、缓存工具类<br>​      public class CacheUtil {</p>
<pre><code>public CacheUtil() {
    throw new UnsupportedOperationException(&quot;cannot be instantiated&quot;);
}

/**
 * 得到缓存大小
 *
 * @param context 上下文
 * @return
 * @throws IOException
 */
public static String getTotalCacheSize(Context context) throws IOException {
    //缓存大小
    long cacheSize = getFolderSize(context.getCacheDir());
    // 如果SD卡正常挂载才可以创建文件或者写入文件等
    if (Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)) {
        cacheSize += getFolderSize(context.getCacheDir());
    }
     return  getFormatSize(cacheSize);
}

/**
 * 得到临时缓存数据
 *
 * @param file
 * @return
 * @throws IOException
 */
public static long getFolderSize(File file) throws IOException {
    long size = 0;
    //文件
    File[] fileList = file.listFiles();
    for (int i = 0; i &lt; fileList.length; i++) {
        if (fileList[i].isDirectory()) {
            size = size + getFolderSize(fileList[i]);
        } else {
            size = size + fileList[i].length();
        }
    }
    return size;
}

/**
 * 清除所有缓存
 */
public static void clearAllCache(Context context) {
    //删除缓存
    deleteDir(context.getCacheDir());
    //如果存在SD卡则删除本地缓存
    if (Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)) {
        deleteDir(context.getExternalCacheDir());
    }

}

/**
 * 是否删除文件
 *
 * @return
 */
public static boolean deleteDir(File dir) {
    // 文件不为空并且是一个文件夹时
    if (dir != null &amp;&amp; dir.isDirectory()) {
        //得到文件集合
        String[] child = dir.list();
        for (int i = 0; i &lt; child.length; i++) {
            //是否删除成功
            boolean isSuccess = deleteDir(new File(dir, child[i]));
            if (!isSuccess) {
                return false;
            }
        }
    }
    return dir.delete();
}

/**
 * 格式化
 *
 * @return
 */
public static String getFormatSize(double size) {
    //KB
    double kiloByte = size / 1024;
    if (kiloByte&lt;1){
        return size+&quot;Byte&quot;;
    }
    //MB
    double megaByte=kiloByte/1024;
    if (megaByte&lt;1){
        //高精度计算结果
        BigDecimal result1=new BigDecimal(Double.toString(kiloByte));
        //四舍五入
        return result1.setScale(2,BigDecimal.ROUND_HALF_UP).toPlainString()+&quot;KB&quot;;
    }
    //GB
    double gigaByte = megaByte/1024;
    if (gigaByte&lt;1){
        BigDecimal result2= new BigDecimal(Double.toString(megaByte));
        return  result2.setScale(2,BigDecimal.ROUND_HALF_UP).toPlainString()+&quot;MB&quot;;
    }
    //TB
    double teraByte =gigaByte/1024;
    if (teraByte&lt;1){
        BigDecimal result3= new BigDecimal(Double.toString(gigaByte));
        return  result3.setScale(2,BigDecimal.ROUND_HALF_UP).toPlainString()+&quot;GB&quot;;
    }
    BigDecimal result4= new BigDecimal(teraByte);
    return result4.setScale(2,BigDecimal.ROUND_HALF_UP).toPlainString()+&quot;TB&quot;;
}
}</code></pre><p>##9、SharedPreferences封装类<br>​      public class SPUtils {<br>​    /**<br>​     * 保存在手机里面的文件名<br>​     */<br>​    public static final String FILE_NAME = “share_data”;</p>
<pre><code>/**
 * 保存数据的方法，我们需要拿到保存数据的具体类型，然后根据类型调用不同的保存方法
 * 
 * @param context
 * @param key
 * @param object
 */
public static void put(Context context, String key, Object object) {

    SharedPreferences sp = context.getSharedPreferences(FILE_NAME,
            Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = sp.edit();

    if (object instanceof String) {
        editor.putString(key, (String) object);
    } else if (object instanceof Integer) {
        editor.putInt(key, (Integer) object);
    } else if (object instanceof Boolean) {
        editor.putBoolean(key, (Boolean) object);
    } else if (object instanceof Float) {
        editor.putFloat(key, (Float) object);
    } else if (object instanceof Long) {
        editor.putLong(key, (Long) object);
    } else {
        editor.putString(key, object.toString());
    }

    /**
     * commit操作使用了SharedPreferencesCompat.apply进行了替代，目的是尽可能的使用apply代替commit
     * 因为commit方法是同步的，并且我们很多时候的commit操作都是UI线程中，毕竟是IO操作，尽可能异步；
     */
    SharedPreferencesCompat.apply(editor);
}

/**
 * 得到保存数据的方法，我们根据默认值得到保存的数据的具体类型，然后调用相对于的方法获取值
 * 
 * @param context
 * @param key
 * @param defaultObject
 * @return
 */
public static Object get(Context context, String key, Object defaultObject) {
    SharedPreferences sp = context.getSharedPreferences(FILE_NAME,
            Context.MODE_PRIVATE);

    if (defaultObject instanceof String) {
        return sp.getString(key, (String) defaultObject);
    } else if (defaultObject instanceof Integer) {
        return sp.getInt(key, (Integer) defaultObject);
    } else if (defaultObject instanceof Boolean) {
        return sp.getBoolean(key, (Boolean) defaultObject);
    } else if (defaultObject instanceof Float) {
        return sp.getFloat(key, (Float) defaultObject);
    } else if (defaultObject instanceof Long) {
        return sp.getLong(key, (Long) defaultObject);
    }

    return null;
}

/**
 * 移除某个key值已经对应的值
 * 
 * @param context
 * @param key
 */
public static void remove(Context context, String key) {
    SharedPreferences sp = context.getSharedPreferences(FILE_NAME,
            Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = sp.edit();
    editor.remove(key);
    SharedPreferencesCompat.apply(editor);
}

/**
 * 清除所有数据
 * 
 * @param context
 */
public static void clear(Context context) {
    SharedPreferences sp = context.getSharedPreferences(FILE_NAME,
            Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = sp.edit();
    editor.clear();
    SharedPreferencesCompat.apply(editor);
}

/**
 * 查询某个key是否已经存在
 * 
 * @param context
 * @param key
 * @return
 */
public static boolean contains(Context context, String key) {
    SharedPreferences sp = context.getSharedPreferences(FILE_NAME,
            Context.MODE_PRIVATE);
    return sp.contains(key);
}

/**
 * 返回所有的键值对
 * 
 * @param context
 * @return
 */
public static Map&lt;String, ?&gt; getAll(Context context) {
    SharedPreferences sp = context.getSharedPreferences(FILE_NAME,
            Context.MODE_PRIVATE);
    return sp.getAll();
}

/**
 * 创建一个解决SharedPreferencesCompat.apply方法的一个兼容类
 * 
 * @author dj
 */
private static class SharedPreferencesCompat {
    private static final Method sApplyMethod = findApplyMethod();

    /**
     * 反射查找apply的方法
     * 
     * @return
     */
    @SuppressWarnings({ &quot;unchecked&quot;, &quot;rawtypes&quot; })
    private static Method findApplyMethod() {
        try {
            Class clz = SharedPreferences.Editor.class;
            return clz.getMethod(&quot;apply&quot;);
        } catch (NoSuchMethodException e) {
        }

        return null;
    }

    /**
     * 如果找到则使用apply执行，否则使用commit
     * 
     * @param editor
     */
    public static void apply(SharedPreferences.Editor editor) {
        try {
            if (sApplyMethod != null) {
                sApplyMethod.invoke(editor);
                return;
            }
        } catch (IllegalArgumentException e) {
        } catch (IllegalAccessException e) {
        } catch (InvocationTargetException e) {
            e.printStackTrace();
        }
        editor.commit();
    }
}
}</code></pre><p>##10、手机信息采集工具类<br>​      public class MobileUtil {</p>
<pre><code>/**
 * Print telephone info.
 */
public static String printMobileInfo(Context context) {
    Date date = new Date(System.currentTimeMillis());
    SimpleDateFormat dateFormat = new SimpleDateFormat(
            &quot;yyyy-MM-dd HH:mm:ss&quot;);
    String time = dateFormat.format(date);
    StringBuilder sb = new StringBuilder();
    sb.append(&quot;系统时间：&quot;).append(time).append(&quot;\n&quot;);
    TelephonyManager tm = (TelephonyManager) context
            .getSystemService(Context.TELEPHONY_SERVICE);
    String IMSI = tm.getSubscriberId();
    // IMSI前面三位460是国家号码，其次的两位是运营商代号，00、02是中国移动，01是联通，03是电信。
    String providerName = null;
    if (IMSI != null) {
        if (IMSI.startsWith(&quot;46000&quot;) || IMSI.startsWith(&quot;46002&quot;)) {
            providerName = &quot;中国移动&quot;;
        } else if (IMSI.startsWith(&quot;46001&quot;)) {
            providerName = &quot;中国联通&quot;;
        } else if (IMSI.startsWith(&quot;46003&quot;)) {
            providerName = &quot;中国电信&quot;;
        }
    }
    sb.append(providerName).append(&quot;\n&quot;)
            .append(getNativePhoneNumber(context)).append(&quot;\n网络模式：&quot;)
            .append(getNetType(context)).append(&quot;\nIMSI是：&quot;).append(IMSI);
    sb.append(&quot;\nDeviceID(IMEI)       :&quot;).append(tm.getDeviceId());
    sb.append(&quot;\nDeviceSoftwareVersion:&quot;).append(
            tm.getDeviceSoftwareVersion());
    sb.append(&quot;\ngetLine1Number       :&quot;).append(tm.getLine1Number());
    sb.append(&quot;\nNetworkCountryIso    :&quot;).append(tm.getNetworkCountryIso());
    sb.append(&quot;\nNetworkOperator      :&quot;).append(tm.getNetworkOperator());
    sb.append(&quot;\nNetworkOperatorName  :&quot;).append(
            tm.getNetworkOperatorName());
    sb.append(&quot;\nNetworkType          :&quot;).append(tm.getNetworkType());
    sb.append(&quot;\nPhoneType            :&quot;).append(tm.getPhoneType());
    sb.append(&quot;\nSimCountryIso        :&quot;).append(tm.getSimCountryIso());
    sb.append(&quot;\nSimOperator          :&quot;).append(tm.getSimOperator());
    sb.append(&quot;\nSimOperatorName      :&quot;).append(tm.getSimOperatorName());
    sb.append(&quot;\nSimSerialNumber      :&quot;).append(tm.getSimSerialNumber());
    sb.append(&quot;\ngetSimState          :&quot;).append(tm.getSimState());
    sb.append(&quot;\nSubscriberId         :&quot;).append(tm.getSubscriberId());
    sb.append(&quot;\nVoiceMailNumber      :&quot;).append(tm.getVoiceMailNumber());

    return sb.toString();
}

/**
 * 打印系统信息
 * 
 * @return
 */
public static String printSystemInfo() {
    Date date = new Date(System.currentTimeMillis());
    SimpleDateFormat dateFormat = new SimpleDateFormat(
            &quot;yyyy-MM-dd HH:mm:ss&quot;);
    String time = dateFormat.format(date);
    StringBuilder sb = new StringBuilder();
    sb.append(&quot;_______  系统信息  &quot;).append(time).append(&quot; ______________&quot;);
    sb.append(&quot;\nID                 :&quot;).append(Build.ID);
    sb.append(&quot;\nBRAND              :&quot;).append(Build.BRAND);
    sb.append(&quot;\nMODEL              :&quot;).append(Build.MODEL);
    sb.append(&quot;\nRELEASE            :&quot;).append(Build.VERSION.RELEASE);
    sb.append(&quot;\nSDK                :&quot;).append(Build.VERSION.SDK);

    sb.append(&quot;\n_______ OTHER _______&quot;);
    sb.append(&quot;\nBOARD              :&quot;).append(Build.BOARD);
    sb.append(&quot;\nPRODUCT            :&quot;).append(Build.PRODUCT);
    sb.append(&quot;\nDEVICE             :&quot;).append(Build.DEVICE);
    sb.append(&quot;\nFINGERPRINT        :&quot;).append(Build.FINGERPRINT);
    sb.append(&quot;\nHOST               :&quot;).append(Build.HOST);
    sb.append(&quot;\nTAGS               :&quot;).append(Build.TAGS);
    sb.append(&quot;\nTYPE               :&quot;).append(Build.TYPE);
    sb.append(&quot;\nTIME               :&quot;).append(Build.TIME);
    sb.append(&quot;\nINCREMENTAL        :&quot;).append(Build.VERSION.INCREMENTAL);

    sb.append(&quot;\n_______ CUPCAKE-3 _______&quot;);
    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.CUPCAKE) {
        sb.append(&quot;\nDISPLAY            :&quot;).append(Build.DISPLAY);
    }

    sb.append(&quot;\n_______ DONUT-4 _______&quot;);
    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.DONUT) {
        sb.append(&quot;\nSDK_INT            :&quot;).append(Build.VERSION.SDK_INT);
        sb.append(&quot;\nMANUFACTURER       :&quot;).append(Build.MANUFACTURER);
        sb.append(&quot;\nBOOTLOADER         :&quot;).append(Build.BOOTLOADER);
        sb.append(&quot;\nCPU_ABI            :&quot;).append(Build.CPU_ABI);
        sb.append(&quot;\nCPU_ABI2           :&quot;).append(Build.CPU_ABI2);
        sb.append(&quot;\nHARDWARE           :&quot;).append(Build.HARDWARE);
        sb.append(&quot;\nUNKNOWN            :&quot;).append(Build.UNKNOWN);
        sb.append(&quot;\nCODENAME           :&quot;).append(Build.VERSION.CODENAME);
    }

    sb.append(&quot;\n_______ GINGERBREAD-9 _______&quot;);
    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.GINGERBREAD) {
        sb.append(&quot;\nSERIAL             :&quot;).append(Build.SERIAL);
    }
    return sb.toString();
}

/****
 * 获取网络类型
 * 
 * @param context
 * @return
 */
public static String getNetType(Context context) {
    try {
        ConnectivityManager connectMgr = (ConnectivityManager) context
                .getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo info = connectMgr.getActiveNetworkInfo();
        if (info == null) {
            return &quot;&quot;;
        }
        if (info.getType() == ConnectivityManager.TYPE_WIFI) {
            return &quot;WIFI&quot;;
        } else if (info.getType() == ConnectivityManager.TYPE_MOBILE) {
            if (info.getSubtype() == TelephonyManager.NETWORK_TYPE_CDMA) {
                return &quot;CDMA&quot;;
            } else if (info.getSubtype() == TelephonyManager.NETWORK_TYPE_EDGE) {
                return &quot;EDGE&quot;;
            } else if (info.getSubtype() == TelephonyManager.NETWORK_TYPE_EVDO_0) {
                return &quot;EVDO0&quot;;
            } else if (info.getSubtype() == TelephonyManager.NETWORK_TYPE_EVDO_A) {
                return &quot;EVDOA&quot;;
            } else if (info.getSubtype() == TelephonyManager.NETWORK_TYPE_GPRS) {
                return &quot;GPRS&quot;;
            }
            /*
             * else if(info.getSubtype() ==
             * TelephonyManager.NETWORK_TYPE_HSDPA){ return &quot;HSDPA&quot;; }else
             * if(info.getSubtype() == TelephonyManager.NETWORK_TYPE_HSPA){
             * return &quot;HSPA&quot;; }else if(info.getSubtype() ==
             * TelephonyManager.NETWORK_TYPE_HSUPA){ return &quot;HSUPA&quot;; }
             */
            else if (info.getSubtype() == TelephonyManager.NETWORK_TYPE_UMTS) {
                return &quot;UMTS&quot;;
            } else {
                return &quot;3G&quot;;
            }
        } else {
            return &quot;&quot;;
        }
    } catch (Exception e) {
        return &quot;&quot;;
    }
}

/**
 * 获取当前设置的电话号码
 */
public static String getNativePhoneNumber(Context context) {
    TelephonyManager telephonyManager = (TelephonyManager) context
            .getSystemService(Context.TELEPHONY_SERVICE);
    String NativePhoneNumber = null;
    NativePhoneNumber = telephonyManager.getLine1Number();
    return String.format(&quot;手机号: %s&quot;, NativePhoneNumber);
}

/**
 * IMSI是国际移动用户识别码的简称(International Mobile Subscriber Identity)
 * IMSI共有15位，其结构如下： &lt;br&gt;
 * MCC+MNC+MIN &lt;br&gt;
 * MCC：Mobile Country Code，移动国家码，共3位，中国为460;&lt;br&gt;
 * MNC:Mobile NetworkCode，移动网络码，共2位 &lt;br&gt;
 * 在中国，移动的代码为电00和02，联通的代码为01，电信的代码为03&lt;br&gt;
 * 合起来就是（也是Android手机中APN配置文件中的代码）： &lt;br&gt;
 * 中国移动：46000 46002 &lt;br&gt;
 * 中国联通：46001 &lt;br&gt;
 * 中国电信：46003 &lt;br&gt;
 * 举例，一个典型的IMSI号码为460030912121001 &lt;br&gt;
 */
public static String getIMSI(Context context) {
    TelephonyManager telephonyManager = (TelephonyManager) context
            .getSystemService(Context.TELEPHONY_SERVICE);
    String IMSI = telephonyManager.getSubscriberId();
    return IMSI;
}

/**
 * IMEI是International Mobile Equipment Identity （国际移动设备标识）的简称
 * IMEI由15位数字组成的”电子串号”，它与每台手机一一对应，而且该码是全世界唯一的 其组成为：
 * 1.前6位数(TAC)是”型号核准号码”，一般代表机型 &lt;br&gt;
 * 2. 接着的2位数(FAC)是”最后装配号”，一般代表产地 &lt;br&gt;
 * 3.之后的6位数(SNR)是”串号”，一般代表生产顺序号 &lt;br&gt;
 * 4. 最后1位数(SP)通常是”0″，为检验码，目前暂备用&lt;br&gt;
 */
public static String getIMEI(Context context) {
    TelephonyManager telephonyManager = (TelephonyManager) context
            .getSystemService(Context.TELEPHONY_SERVICE);
    String IMEI = telephonyManager.getDeviceId();
    return IMEI;
}

// ///_________________ 双卡双待系统IMEI和IMSI方案（see more on
// http://benson37.iteye.com/blog/1923946）

/**
 * 双卡双待神机IMSI、IMSI、PhoneType信息 &lt;uses-permission
 * android:name=&quot;android.permission.READ_PHONE_STATE&quot;/&gt;
 */
public static class TeleInfo {
    public String imsi_1;
    public String imsi_2;
    public String imei_1;
    public String imei_2;
    public int phoneType_1;
    public int phoneType_2;

    @Override
    public String toString() {
        return &quot;TeleInfo{&quot; + &quot;imsi_1=&apos;&quot; + imsi_1 + &apos;\&apos;&apos; + &quot;, imsi_2=&apos;&quot;
                + imsi_2 + &apos;\&apos;&apos; + &quot;, imei_1=&apos;&quot; + imei_1 + &apos;\&apos;&apos;
                + &quot;, imei_2=&apos;&quot; + imei_2 + &apos;\&apos;&apos; + &quot;, phoneType_1=&quot;
                + phoneType_1 + &quot;, phoneType_2=&quot; + phoneType_2 + &apos;}&apos;;
    }
}

/**
 * MTK Phone.
 * &lt;p&gt;
 * 获取 MTK 神机的双卡 IMSI、IMSI 信息
 */
public static TeleInfo getMtkTeleInfo(Context context) {
    TeleInfo teleInfo = new TeleInfo();
    try {
        Class&lt;?&gt; phone = Class
                .forName(&quot;com.android.internal.telephony.Phone&quot;);

        Field fields1 = phone.getField(&quot;GEMINI_SIM_1&quot;);
        fields1.setAccessible(true);
        int simId_1 = (Integer) fields1.get(null);

        Field fields2 = phone.getField(&quot;GEMINI_SIM_2&quot;);
        fields2.setAccessible(true);
        int simId_2 = (Integer) fields2.get(null);

        TelephonyManager tm = (TelephonyManager) context
                .getSystemService(Context.TELEPHONY_SERVICE);
        Method getSubscriberIdGemini = TelephonyManager.class
                .getDeclaredMethod(&quot;getSubscriberIdGemini&quot;, int.class);
        String imsi_1 = (String) getSubscriberIdGemini.invoke(tm, simId_1);
        String imsi_2 = (String) getSubscriberIdGemini.invoke(tm, simId_2);
        teleInfo.imsi_1 = imsi_1;
        teleInfo.imsi_2 = imsi_2;

        Method getDeviceIdGemini = TelephonyManager.class
                .getDeclaredMethod(&quot;getDeviceIdGemini&quot;, int.class);
        String imei_1 = (String) getDeviceIdGemini.invoke(tm, simId_1);
        String imei_2 = (String) getDeviceIdGemini.invoke(tm, simId_2);

        teleInfo.imei_1 = imei_1;
        teleInfo.imei_2 = imei_2;

        Method getPhoneTypeGemini = TelephonyManager.class
                .getDeclaredMethod(&quot;getPhoneTypeGemini&quot;, int.class);
        int phoneType_1 = (Integer) getPhoneTypeGemini.invoke(tm, simId_1);
        int phoneType_2 = (Integer) getPhoneTypeGemini.invoke(tm, simId_2);
        teleInfo.phoneType_1 = phoneType_1;
        teleInfo.phoneType_2 = phoneType_2;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return teleInfo;
}

/**
 * MTK Phone.
 * &lt;p&gt;
 * 获取 MTK 神机的双卡 IMSI、IMSI 信息
 */
public static TeleInfo getMtkTeleInfo2(Context context) {
    TeleInfo teleInfo = new TeleInfo();
    try {
        TelephonyManager tm = (TelephonyManager) context
                .getSystemService(Context.TELEPHONY_SERVICE);
        Class&lt;?&gt; phone = Class
                .forName(&quot;com.android.internal.telephony.Phone&quot;);
        Field fields1 = phone.getField(&quot;GEMINI_SIM_1&quot;);
        fields1.setAccessible(true);
        int simId_1 = (Integer) fields1.get(null);
        Field fields2 = phone.getField(&quot;GEMINI_SIM_2&quot;);
        fields2.setAccessible(true);
        int simId_2 = (Integer) fields2.get(null);

        Method getDefault = TelephonyManager.class.getMethod(&quot;getDefault&quot;,
                int.class);
        TelephonyManager tm1 = (TelephonyManager) getDefault.invoke(tm,
                simId_1);
        TelephonyManager tm2 = (TelephonyManager) getDefault.invoke(tm,
                simId_2);

        String imsi_1 = tm1.getSubscriberId();
        String imsi_2 = tm2.getSubscriberId();
        teleInfo.imsi_1 = imsi_1;
        teleInfo.imsi_2 = imsi_2;

        String imei_1 = tm1.getDeviceId();
        String imei_2 = tm2.getDeviceId();
        teleInfo.imei_1 = imei_1;
        teleInfo.imei_2 = imei_2;

        int phoneType_1 = tm1.getPhoneType();
        int phoneType_2 = tm2.getPhoneType();
        teleInfo.phoneType_1 = phoneType_1;
        teleInfo.phoneType_2 = phoneType_2;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return teleInfo;
}

/**
 * Qualcomm Phone. 获取 高通 神机的双卡 IMSI、IMSI 信息
 */
public static TeleInfo getQualcommTeleInfo(Context context) {
    TeleInfo teleInfo = new TeleInfo();
    try {
        TelephonyManager tm = (TelephonyManager) context
                .getSystemService(Context.TELEPHONY_SERVICE);
        Class&lt;?&gt; simTMclass = Class
                .forName(&quot;android.telephony.MSimTelephonyManager&quot;);
        // Object sim = context.getSystemService(&quot;phone_msim&quot;);
        Object sim = context.getSystemService(Context.TELEPHONY_SERVICE);
        int simId_1 = 0;
        int simId_2 = 1;

        Method getSubscriberId = simTMclass.getMethod(&quot;getSubscriberId&quot;,
                int.class);
        String imsi_1 = (String) getSubscriberId.invoke(sim, simId_1);
        String imsi_2 = (String) getSubscriberId.invoke(sim, simId_2);
        teleInfo.imsi_1 = imsi_1;
        teleInfo.imsi_2 = imsi_2;

        Method getDeviceId = simTMclass.getMethod(&quot;getDeviceId&quot;, int.class);
        String imei_1 = (String) getDeviceId.invoke(sim, simId_1);
        String imei_2 = (String) getDeviceId.invoke(sim, simId_2);
        teleInfo.imei_1 = imei_1;
        teleInfo.imei_2 = imei_2;

        Method getDataState = simTMclass.getMethod(&quot;getDataState&quot;);
        int phoneType_1 = tm.getDataState();
        int phoneType_2 = (Integer) getDataState.invoke(sim);
        teleInfo.phoneType_1 = phoneType_1;
        teleInfo.phoneType_2 = phoneType_2;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return teleInfo;
}

/**
 * Spreadtrum Phone.
 * &lt;p&gt;
 * 获取 展讯 神机的双卡 IMSI、IMSI 信息
 */
public static TeleInfo getSpreadtrumTeleInfo(Context context) {
    TeleInfo teleInfo = new TeleInfo();
    try {

        TelephonyManager tm1 = (TelephonyManager) context
                .getSystemService(Context.TELEPHONY_SERVICE);
        String imsi_1 = tm1.getSubscriberId();
        String imei_1 = tm1.getDeviceId();
        int phoneType_1 = tm1.getPhoneType();
        teleInfo.imsi_1 = imsi_1;
        teleInfo.imei_1 = imei_1;
        teleInfo.phoneType_1 = phoneType_1;

        Class&lt;?&gt; phoneFactory = Class
                .forName(&quot;com.android.internal.telephony.PhoneFactory&quot;);
        Method getServiceName = phoneFactory.getMethod(&quot;getServiceName&quot;,
                String.class, int.class);
        getServiceName.setAccessible(true);
        TelephonyManager tm2 = (TelephonyManager) context
                .getSystemService(Context.TELEPHONY_SERVICE);
        String imsi_2 = tm2.getSubscriberId();
        String imei_2 = tm2.getDeviceId();
        int phoneType_2 = tm2.getPhoneType();
        teleInfo.imsi_2 = imsi_2;
        teleInfo.imei_2 = imei_2;
        teleInfo.phoneType_2 = phoneType_2;

    } catch (Exception e) {
        e.printStackTrace();
    }
    return teleInfo;
}

/**
 * 获取 MAC 地址 &lt;uses-permission
 * android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot;/&gt;
 */
public static String getMacAddress(Context context) {
    // wifi mac地址
    WifiManager wifi = (WifiManager) context
            .getSystemService(Context.WIFI_SERVICE);
    WifiInfo info = wifi.getConnectionInfo();
    String mac = info.getMacAddress();

    return mac;
}

/**
 * 获取 开机时间
 */
public static String getBootTimeString() {
    long ut = SystemClock.elapsedRealtime() / 1000;
    int h = (int) ((ut / 3600));
    int m = (int) ((ut / 60) % 60);

    return h + &quot;:&quot; + m;
}
}</code></pre><p>##11、CommonUtils<br>​      public class CommonUtils {<br>​<br>​    static Context context;<br>​    // 手机网络类型<br>​    public static final int NETTYPE_WIFI = 0x01;<br>​    public static final int NETTYPE_CMWAP = 0x02;<br>​    public static final int NETTYPE_CMNET = 0x03;<br>​<br>​    public static boolean GTE_HC;<br>​    public static boolean GTE_ICS;<br>​    public static boolean PRE_HC;<br>​    private static Boolean _hasBigScreen = null;<br>​    private static Boolean _hasCamera = null;<br>​    private static Boolean _isTablet = null;<br>​    private static Integer _loadFactor = null;<br>​<br>​    private static int _pageSize = -1;<br>​    public static float displayDensity = 0.0F;<br>​    public static final String TAG = context.getClass().getSimpleName();<br>​<br>    static {<br>        GTE_ICS = Build.VERSION.SDK_INT &gt;= 14;<br>        GTE_HC = Build.VERSION.SDK_INT &gt;= 11;<br>        PRE_HC = Build.VERSION.SDK_INT &gt;= 11 ? false : true;<br>    }</p>
<pre><code>public CommonUtils() {
    throw new AssertionError();
}

/**
 * 获取系统当前当前时间戳
 */

public static String getTimesTamp() {
    long timestamp = System.currentTimeMillis() / 1000;
    return String.valueOf(timestamp);
}

public static int[] getRealScreenSize(Activity activity) {
    int[] size = new int[2];
    int screenWidth = 0, screenHeight = 0;
    WindowManager w = activity.getWindowManager();
    Display d = w.getDefaultDisplay();
    DisplayMetrics metrics = new DisplayMetrics();
    d.getMetrics(metrics);
    // since SDK_INT = 1;
    screenWidth = metrics.widthPixels;
    screenHeight = metrics.heightPixels;
    // includes window decorations (statusbar bar/menu bar)
    if (Build.VERSION.SDK_INT &gt;= 14 &amp;&amp; Build.VERSION.SDK_INT &lt; 17)
        try {
            screenWidth = (Integer) Display.class.getMethod(&quot;getRawWidth&quot;)
                    .invoke(d);
            screenHeight = (Integer) Display.class
                    .getMethod(&quot;getRawHeight&quot;).invoke(d);
        } catch (Exception ignored) {
        }
    // includes window decorations (statusbar bar/menu bar)
    if (Build.VERSION.SDK_INT &gt;= 17)
        try {
            Point realSize = new Point();
            Display.class.getMethod(&quot;getRealSize&quot;, Point.class).invoke(d,
                    realSize);
            screenWidth = realSize.x;
            screenHeight = realSize.y;
        } catch (Exception ignored) {
        }
    size[0] = screenWidth;
    size[1] = screenHeight;
    return size;
}

/**
 * 是否存在相机
 * 
 * @return
 */
public static final boolean hasCamera(Context context) {
    if (_hasCamera == null) {
        PackageManager pckMgr = context.getPackageManager();
        boolean flag = pckMgr
                .hasSystemFeature(&quot;android.hardware.camera.front&quot;);
        boolean flag1 = pckMgr.hasSystemFeature(&quot;android.hardware.camera&quot;);
        boolean flag2;
        if (flag || flag1)
            flag2 = true;
        else
            flag2 = false;
        _hasCamera = Boolean.valueOf(flag2);
    }
    return _hasCamera.booleanValue();
}

/**
 * 判断是否有物理的menu键
 * 
 * @param context
 * @return
 */
public static boolean hasHardwareMenuKey(Context context) {
    boolean flag = false;
    if (PRE_HC)
        flag = true;
    else if (GTE_ICS) {
        flag = ViewConfiguration.get(context).hasPermanentMenuKey();
    } else
        flag = false;
    return flag;
}

/**
 * 是否有google商店
 * 
 * @param activity
 * @param pck
 * @return
 */
public static boolean gotoGoogleMarket(Activity activity, String pck) {
    try {
        Intent intent = new Intent();
        intent.setPackage(&quot;com.android.vending&quot;);
        intent.setAction(Intent.ACTION_VIEW);
        intent.setData(Uri.parse(&quot;market://details?id=&quot; + pck));
        activity.startActivity(intent);
        return true;
    } catch (Exception e) {
        e.printStackTrace();
        return false;
    }
}

/**
 * 隐藏动画视图
 * 
 * @param view
 */
public static void hideAnimatedView(View view) {
    if (PRE_HC &amp;&amp; view != null)
        view.setPadding(view.getWidth(), 0, 0, 0);
}

/**
 * 显示动画视图
 * 
 * @param view
 */
public static void showAnimatedView(View view) {
    if (PRE_HC &amp;&amp; view != null)
        view.setPadding(0, 0, 0, 0);
}

/**
 * 显示键盘dialog
 * 
 * @param dialog
 */
public static void showSoftKeyboard(Dialog dialog) {
    dialog.getWindow().setSoftInputMode(4);
}

/**
 * 切换键盘
 * 
 * @param view
 */

public static void toogleSoftKeyboard(Context context, View view) {
    ((InputMethodManager) context
            .getSystemService(Context.INPUT_METHOD_SERVICE))
            .toggleSoftInput(0, InputMethodManager.HIDE_NOT_ALWAYS);
}

/**
 * 判断是否横屏
 * 
 * @return
 */
public static boolean isLandscape(Context context) {
    boolean flag;
    if (context.getResources().getConfiguration().orientation == 2)
        flag = true;
    else
        flag = false;
    return flag;
}

/**
 * 判断是否竖屏
 * 
 * @return
 */

public static boolean isPortrait(Context context) {
    boolean flag = true;
    if (context.getResources().getConfiguration().orientation != 1)
        flag = false;
    return flag;
}

/**
 * 判断是否平板
 * 
 * @return
 */

public static boolean isTablet(Context context) {
    if (_isTablet == null) {
        boolean flag;
        if ((0xf &amp; context.getResources().getConfiguration().screenLayout) &gt;= 3)
            flag = true;
        else
            flag = false;
        _isTablet = Boolean.valueOf(flag);
    }
    return _isTablet.booleanValue();
}

/**
 * 判断是否有sd卡
 * 
 * @return
 */

public static boolean isSdcardReady() {
    return Environment.MEDIA_MOUNTED.equals(Environment
            .getExternalStorageState());
}

/**
 * 判断系统语言国家
 * 
 * @return
 */
public static String getCurCountryLan(Context context) {
    return context.getResources().getConfiguration().locale.getLanguage()
            + &quot;-&quot;
            + context.getResources().getConfiguration().locale.getCountry();
}

/**
 * 判断是否中文简体（CN）国家中国
 * 
 * @return
 */

public static boolean isZhCN(Context context) {
    String lang = context.getResources().getConfiguration().locale
            .getCountry();
    if (lang.equalsIgnoreCase(&quot;CN&quot;)) {
        return true;
    }
    return false;
}

/**
 * 获取两个数的百分比
 * 
 * @param p1
 * @param p2
 * @return
 */
public static String percent(double p1, double p2) {
    String str;
    double p3 = p1 / p2;
    NumberFormat nf = NumberFormat.getPercentInstance();
    nf.setMinimumFractionDigits(5);// 保留的小数位数(精度)
    str = nf.format(p3);
    return str;
}

public static String percent2(double p1, double p2) {
    String str;
    double p3 = p1 / p2;
    NumberFormat nf = NumberFormat.getPercentInstance();
    nf.setMinimumFractionDigits(0);
    str = nf.format(p3);
    return str;
}

/**
 * 打开本app在应用商店的页面
 * 
 * @param context
 */
public static void openAppInMarket(Context context) {

    if (context != null) {
        String pckName = context.getPackageName();
        try {
            String str = &quot;market://details?id=&quot; + pckName;
            Intent localIntent = new Intent(&quot;android.intent.action.VIEW&quot;);
            localIntent.setData(Uri.parse(str));
            context.startActivity(localIntent);

        } catch (Exception ex) {

        }
    }
}

/**
 * 全屏显示，去掉顶部状态栏
 * 
 * @param activity
 */
public static void setFullScreen(Activity activity) {
    WindowManager.LayoutParams params = activity.getWindow()
            .getAttributes();
    params.flags |= WindowManager.LayoutParams.FLAG_FULLSCREEN;
    activity.getWindow().setAttributes(params);
    activity.getWindow().addFlags(
            WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS);
}

/**
 * 关闭全屏显示
 * 
 * @param activity
 */
public static void cancelFullScreen(Activity activity) {
    WindowManager.LayoutParams params = activity.getWindow()
            .getAttributes();
    params.flags &amp;= (~WindowManager.LayoutParams.FLAG_FULLSCREEN);
    activity.getWindow().setAttributes(params);
    activity.getWindow().clearFlags(
            WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS);
}

/**
 * 得到应用包名
 * 
 * @param pckName
 * @return
 */
public static PackageInfo getPackageInfo(Context context, String pckName) {
    try {
        return context.getPackageManager().getPackageInfo(pckName, 0);
    } catch (PackageManager.NameNotFoundException e) {
        Log.e(&quot;&quot;, e.getMessage());
    }
    return null;
}

/**
 * 获取版本名称
 * 
 * @return
 */
public static String getVersionName(Context context) {
    String name = &quot;&quot;;
    try {
        name = context.getPackageManager().getPackageInfo(
                context.getPackageName(), 0).versionName;
    } catch (PackageManager.NameNotFoundException ex) {
        name = &quot;&quot;;
    }
    return name;
}

/**
 * 安装apk
 * 
 * @param context
 * @param file
 */
public static void installAPK(Context context, File file) {
    if (file == null || !file.exists())
        return;
    Intent intent = new Intent();
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    intent.setAction(Intent.ACTION_VIEW);
    intent.setDataAndType(Uri.fromFile(file),
            &quot;application/vnd.android.package-archive&quot;);
    context.startActivity(intent);
}

/**
 * 获得安转的apk
 * 
 * @param file
 * @return
 */
public static Intent getInstallApkIntent(File file) {
    Intent intent = new Intent();
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    intent.setAction(Intent.ACTION_VIEW);
    intent.setDataAndType(Uri.fromFile(file),
            &quot;application/vnd.android.package-archive&quot;);
    return intent;
}

/**
 * 打电话
 * 
 * @param context
 * @param number
 */
public static void openDial(Context context, String number) {
    Uri uri = Uri.parse(&quot;tel:&quot; + number);
    Intent it = new Intent(Intent.ACTION_DIAL, uri);
    context.startActivity(it);
}

/**
 * 发短信
 * 
 * @param context
 * @param smsBody
 * @param tel
 */

public static void openSMS(Context context, String smsBody, String tel) {
    Uri uri = Uri.parse(&quot;smsto:&quot; + tel);
    Intent it = new Intent(Intent.ACTION_SENDTO, uri);
    it.putExtra(&quot;sms_body&quot;, smsBody);
    context.startActivity(it);
}

public static void openDail(Context context) {
    Intent intent = new Intent(Intent.ACTION_DIAL);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(intent);
}

public static void openSendMsg(Context context) {
    Uri uri = Uri.parse(&quot;smsto:&quot;);
    Intent intent = new Intent(Intent.ACTION_SENDTO, uri);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(intent);
}

/**
 * 调用系统相机
 * 
 * @param context
 */
public static void openCamera(Context context) {
    Intent intent = new Intent(); // 调用照相机
    intent.setAction(&quot;android.media.action.STILL_IMAGE_CAMERA&quot;);
    intent.setFlags(0x34c40000);
    context.startActivity(intent);
}

/**
 * 获取移动设备标识码 需要权限android.permission.READ_PHONE_STATE
 * 
 * @return
 */
public static String getIMEI(Context context) {
    TelephonyManager tel = (TelephonyManager) context
            .getSystemService(Context.TELEPHONY_SERVICE);
    return tel.getDeviceId();
}

/**
 * 获得手机型号
 * 
 * @return
 */
public static String getPhoneType() {
    return Build.MODEL;
}

/**
 * 打开手机上安装的指定包名的app
 * 
 * @param context
 * @param packageName
 */
public static void openApp(Context context, String packageName) {
    Intent mainIntent = context.getPackageManager()
            .getLaunchIntentForPackage(packageName);
    if (mainIntent == null) {
        mainIntent = new Intent(packageName);
    } else {
        Log.i(TAG, &quot;Action:&quot; + mainIntent.getAction());
    }
    context.startActivity(mainIntent);
}

public static boolean openAppActivity(Context context, String packageName,
        String activityName) {
    Intent intent = new Intent(Intent.ACTION_MAIN);
    intent.addCategory(Intent.CATEGORY_LAUNCHER);
    ComponentName cn = new ComponentName(packageName, activityName);
    intent.setComponent(cn);
    try {
        context.startActivity(intent);
        return true;
    } catch (Exception e) {
        return false;
    }
}

/**
 * 发送邮件
 * 
 * @param context
 * @param subject
 *            主题
 * @param content
 *            内容
 * @param emails
 *            邮件地址
 */
public static void sendEmail(Context context, String subject,
        String content, String... emails) {
    try {
        Intent intent = new Intent(Intent.ACTION_SEND);
        // 模拟器
        // intent.setType(&quot;text/plain&quot;);
        intent.setType(&quot;message/rfc822&quot;); // 真机
        intent.putExtra(Intent.EXTRA_EMAIL, emails);
        intent.putExtra(Intent.EXTRA_SUBJECT, subject);
        intent.putExtra(Intent.EXTRA_TEXT, content);
        context.startActivity(intent);
    } catch (ActivityNotFoundException e) {
        e.printStackTrace();
    }
}

public static boolean hasStatusBar(Activity activity) {
    WindowManager.LayoutParams attrs = activity.getWindow().getAttributes();
    if ((attrs.flags &amp; WindowManager.LayoutParams.FLAG_FULLSCREEN) == WindowManager.LayoutParams.FLAG_FULLSCREEN) {
        return false;
    } else {
        return true;
    }
}

/**
 * 调用系统安装了的应用分享
 * 
 * @param context
 * @param title
 * @param url
 */
public static void showSystemShareOption(Activity context,
        final String title, final String url) {
    Intent intent = new Intent(Intent.ACTION_SEND);
    intent.setType(&quot;text/plain&quot;);
    intent.putExtra(Intent.EXTRA_SUBJECT, &quot;分享：&quot; + title);
    intent.putExtra(Intent.EXTRA_TEXT, title + &quot; &quot; + url);
    context.startActivity(Intent.createChooser(intent, &quot;选择分享&quot;));
}

/**
 * 获取当前网络类型
 * 
 * @return 0：没有网络 1：WIFI网络 2：WAP网络 3：NET网络
 */
public static int getNetworkType(Context context) {
    int netType = 0;
    ConnectivityManager connectivityManager = (ConnectivityManager) context
            .getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();
    if (networkInfo == null) {
        return netType;
    }
    int nType = networkInfo.getType();
    if (nType == ConnectivityManager.TYPE_MOBILE) {
        String extraInfo = networkInfo.getExtraInfo();
        if (!TextUtils.isEmpty(extraInfo)) {
            if (extraInfo.toLowerCase().equals(&quot;cmnet&quot;)) {
                netType = NETTYPE_CMNET;
            } else {
                netType = NETTYPE_CMWAP;
            }
        }
    } else if (nType == ConnectivityManager.TYPE_WIFI) {
        netType = NETTYPE_WIFI;
    }
    return netType;
}
 }</code></pre><p>##12、打开地图工具类<br>​      public class OpenLocalMapUtil {</p>
<pre><code>public OpenLocalMapUtil() {
    throw new AssertionError();
}

/**
 * 高德地图应用是否安装
 * 
 * @return
 */
public static boolean isGdMapInstalled() {
    return isInstallPackage(&quot;com.autonavi.minimap&quot;);
}

/**
 * 百度地图应用是否安装
 * 
 * @return
 */
public static boolean isBaiduMapInstalled() {
    return isInstallPackage(&quot;com.baidu.BaiduMap&quot;);
}

private static boolean isInstallPackage(String packageName) {
    return new File(&quot;/data/data/&quot; + packageName).exists();
}

/**
 * 获取打开百度地图应用uri [http://lbsyun.baidu.com/index.php?title=uri/api/android]
 * 
 * @param originLat
 * @param originLon
 * @param desLat
 * @param desLon
 * @return
 */
public static String getBaiduMapUri(String originLat, String originLon,
        String originName, String desLat, String desLon,
        String destination, String region, String src) {
    String uri = &quot;intent://map/direction?origin=latlng:%1$s,%2$s|name:%3$s&quot;
            + &quot;&amp;destination=latlng:%4$s,%5$s|name:%6$s&amp;mode=driving&amp;region=%7$s&amp;src=%8$s#Intent;&quot;
            + &quot;scheme=bdapp;package=com.baidu.BaiduMap;end&quot;;

    return String.format(uri, originLat, originLon, originName, desLat,
            desLon, destination, region, src);
}

/**
 * 获取打开高德地图应用uri
 */
public static String getGdMapUri(String appName, String slat, String slon,
        String sname, String dlat, String dlon, String dname) {
    String uri = &quot;androidamap://route?sourceApplication=%1$s&amp;slat=%2$s&amp;slon=%3$s&amp;sname=%4$s&amp;dlat=%5$s&amp;dlon=%6$s&amp;dname=%7$s&amp;dev=0&amp;m=0&amp;t=2&quot;;
    return String
            .format(uri, appName, slat, slon, sname, dlat, dlon, dname);
}

/**
 * 网页版百度地图 有经纬度
 * 
 * @param originLat
 * @param originLon
 * @param originName
 *            -&gt;注：必填
 * @param desLat
 * @param desLon
 * @param destination
 * @param region
 *            : 当给定region时，认为起点和终点都在同一城市，除非单独给定起点或终点的城市。--&gt;注：必填，不填不会显示导航路线
 * @param appName
 * @return
 */
public static String getWebBaiduMapUri(String originLat, String originLon,
        String originName, String desLat, String desLon,
        String destination, String region, String appName) {
    String uri = &quot;http://api.map.baidu.com/direction?origin=latlng:%1$s,%2$s|name:%3$s&quot;
            + &quot;&amp;destination=latlng:%4$s,%5$s|name:%6$s&amp;mode=driving&amp;region=%7$s&amp;output=html&quot;
            + &quot;&amp;src=%8$s&quot;;
    return String.format(uri, originLat, originLon, originName, desLat,
            desLon, destination, region, appName);
}

/**
 * 百度地图定位经纬度转高德经纬度
 * 
 * @param bd_lat
 * @param bd_lon
 * @return
 */
public static double[] bdToGaoDe(double bd_lat, double bd_lon) {
    double[] gd_lat_lon = new double[2];
    double PI = 3.14159265358979324 * 3000.0 / 180.0;
    double x = bd_lon - 0.0065, y = bd_lat - 0.006;
    double z = Math.sqrt(x * x + y * y) - 0.00002 * Math.sin(y * PI);
    double theta = Math.atan2(y, x) - 0.000003 * Math.cos(x * PI);
    gd_lat_lon[0] = z * Math.cos(theta);
    gd_lat_lon[1] = z * Math.sin(theta);
    return gd_lat_lon;
}

/**
 * 高德地图定位经纬度转百度经纬度
 * 
 * @param gd_lon
 * @param gd_lat
 * @return
 */
public static double[] gaoDeToBaidu(double gd_lon, double gd_lat) {
    double[] bd_lat_lon = new double[2];
    double PI = 3.14159265358979324 * 3000.0 / 180.0;
    double x = gd_lon, y = gd_lat;
    double z = Math.sqrt(x * x + y * y) + 0.00002 * Math.sin(y * PI);
    double theta = Math.atan2(y, x) + 0.000003 * Math.cos(x * PI);
    bd_lat_lon[0] = z * Math.cos(theta) + 0.0065;
    bd_lat_lon[1] = z * Math.sin(theta) + 0.006;
    return bd_lat_lon;
}
}</code></pre><p>##13、SDCard工具类<br>​      public class SDCardUtils {<br>​    private SDCardUtils() {<br>​        /* cannot be instantiated */<br>​        throw new UnsupportedOperationException(“cannot be instantiated”);<br>​    }</p>
<pre><code>/**
 * 判断SDCard是否可用
 * 
 * @return
 */
public static boolean isSDCardEnable() {
    return Environment.getExternalStorageState().equals(
            Environment.MEDIA_MOUNTED);
}

/**
 * 获取SD卡路径
 * 
 * @return
 */
public static String getSDCardPath() {
    return Environment.getExternalStorageDirectory().getAbsolutePath()
            + File.separator;
}

/**
 * 获取SD卡的剩余容量 单位byte
 * 
 * @return
 */
public static long getSDCardAllSize() {
    if (isSDCardEnable()) {
        StatFs stat = new StatFs(getSDCardPath());
        // 获取空闲的数据块的数量
        long availableBlocks = (long) stat.getAvailableBlocks() - 4;
        // 获取单个数据块的大小（byte）
        long freeBlocks = stat.getAvailableBlocks();
        return freeBlocks * availableBlocks;
    }
    return 0;
}

/**
 * 获取指定路径所在空间的剩余可用容量字节数，单位byte
 * 
 * @param filePath
 * @return 容量字节 SDCard可用空间，内部存储可用空间
 */
public static long getFreeBytes(String filePath) {
    // 如果是sd卡的下的路径，则获取sd卡可用容量
    if (filePath.startsWith(getSDCardPath())) {
        filePath = getSDCardPath();
    } else {// 如果是内部存储的路径，则获取内存存储的可用容量
        filePath = Environment.getDataDirectory().getAbsolutePath();
    }
    StatFs stat = new StatFs(filePath);
    long availableBlocks = (long) stat.getAvailableBlocks() - 4;
    return stat.getBlockSize() * availableBlocks;
}

/**
 * 获取系统存储路径
 * 
 * @return
 */
public static String getRootDirectoryPath() {
    return Environment.getRootDirectory().getAbsolutePath();
}
}</code></pre><p>##14、TimeUtils<br>​      public class TimeUtils {</p>
<pre><code>public static final SimpleDateFormat DEFAULT_DATE_FORMAT = new SimpleDateFormat(
        &quot;yyyy-MM-dd HH:mm:ss&quot;);
public static final SimpleDateFormat DATE_FORMAT_DATE = new SimpleDateFormat(
        &quot;yyyy-MM-dd&quot;);

private TimeUtils() {
    throw new AssertionError();
}

/**
 * long time to string
 * 
 * @param timeInMillis
 * @param dateFormat
 * @return
 */
public static String getTime(long timeInMillis, SimpleDateFormat dateFormat) {
    return dateFormat.format(new Date(timeInMillis));
}

/**
 * long time to string, format is {@link #DEFAULT_DATE_FORMAT}
 * 
 * @param timeInMillis
 * @return
 */
public static String getTime(long timeInMillis) {
    return getTime(timeInMillis, DEFAULT_DATE_FORMAT);
}

/**
 * get current time in milliseconds
 * 
 * @return
 */
public static long getCurrentTimeInLong() {
    return System.currentTimeMillis();
}

/**
 * get current time in milliseconds, format is {@link #DEFAULT_DATE_FORMAT}
 * 
 * @return
 */
public static String getCurrentTimeInString() {
    return getTime(getCurrentTimeInLong());
}

/**
 * get current time in milliseconds
 * 
 * @return
 */
public static String getCurrentTimeInString(SimpleDateFormat dateFormat) {
    return getTime(getCurrentTimeInLong(), dateFormat);
}

/**
 * UTC转换为本地时间
 * 
 * @param pattern
 * @param dateTime
 * @return
 */
public static String utc2Local(String dateTime) {
    dateTime = DEFAULT_DATE_FORMAT.format(new Date(
            (Long.valueOf(dateTime)) * 1000));
    return dateTime;
}
}</code></pre><p>##15、SnackbarUtil<br>​      public class SnackbarUtil {</p>
<pre><code>public static final   int Info = 1;
public static final  int Confirm = 2;
public static final  int Warning = 3;
public static final  int Alert = 4;


public static  int red = 0xfff44336;
public static  int green = 0xff4caf50;
public static  int blue = 0xff2195f3;
public static  int orange = 0xffffc107;

/**
 * 短显示Snackbar，自定义颜色
 * @param view
 * @param message
 * @param messageColor
 * @param backgroundColor
 * @return
 */
public static Snackbar ShortSnackbar(View view, String message, int messageColor, int backgroundColor){
    Snackbar snackbar = Snackbar.make(view,message, Snackbar.LENGTH_SHORT);
    setSnackbarColor(snackbar,messageColor,backgroundColor);
    return snackbar;
}

/**
 * 长显示Snackbar，自定义颜色
 * @param view
 * @param message
 * @param messageColor
 * @param backgroundColor
 * @return
 */
public static Snackbar LongSnackbar(View view, String message, int messageColor, int backgroundColor){
    Snackbar snackbar = Snackbar.make(view,message, Snackbar.LENGTH_LONG);
    setSnackbarColor(snackbar,messageColor,backgroundColor);
    return snackbar;
}

/**
 * 自定义时常显示Snackbar，自定义颜色
 * @param view
 * @param message
 * @param messageColor
 * @param backgroundColor
 * @return
 */
public static Snackbar IndefiniteSnackbar(View view, String message, int duration, int messageColor, int backgroundColor){
    Snackbar snackbar = Snackbar.make(view,message, Snackbar.LENGTH_INDEFINITE).setDuration(duration);
    setSnackbarColor(snackbar,messageColor,backgroundColor);
    return snackbar;
}

/**
 * 短显示Snackbar，可选预设类型
 * @param view
 * @param message
 * @param type
 * @return
 */
public static Snackbar ShortSnackbar(View view, String message, int type){
    Snackbar snackbar = Snackbar.make(view,message, Snackbar.LENGTH_SHORT);
    switchType(snackbar,type);
    return snackbar;
}

/**
 * 长显示Snackbar，可选预设类型
 * @param view
 * @param message
 * @param type
 * @return
 */
public static Snackbar LongSnackbar(View view, String message, int type){
    Snackbar snackbar = Snackbar.make(view,message, Snackbar.LENGTH_LONG);
    switchType(snackbar,type);
    return snackbar;
}

/**
 * 自定义时常显示Snackbar，可选预设类型
 * @param view
 * @param message
 * @param type
 * @return
 */
public static Snackbar IndefiniteSnackbar(View view, String message, int duration, int type){
    Snackbar snackbar = Snackbar.make(view,message, Snackbar.LENGTH_INDEFINITE).setDuration(duration);
    switchType(snackbar,type);
    return snackbar;
}

//选择预设类型
private static void switchType(Snackbar snackbar, int type){
    switch (type){
        case Info:
            setSnackbarColor(snackbar,blue);
            break;
        case Confirm:
            setSnackbarColor(snackbar,green);
            break;
        case Warning:
            setSnackbarColor(snackbar,orange);
            break;
        case Alert:
            setSnackbarColor(snackbar, Color.YELLOW,red);
            break;
    }
}

/**
 * 设置Snackbar背景颜色
 * @param snackbar
 * @param backgroundColor
 */
public static void setSnackbarColor(Snackbar snackbar, int backgroundColor) {
    View view = snackbar.getView();
    if(view!=null){
        view.setBackgroundColor(backgroundColor);
    }
}

/**
 * 设置Snackbar文字和背景颜色
 * @param snackbar
 * @param messageColor
 * @param backgroundColor
 */
public static void setSnackbarColor(Snackbar snackbar, int messageColor, int backgroundColor) {
    View view = snackbar.getView();
    if(view!=null){
        view.setBackgroundColor(backgroundColor);
        ((TextView) view.findViewById(R.id.snackbar_text)).setTextColor(messageColor);
    }
}

/**
 * 向Snackbar中添加view
 * @param snackbar
 * @param layoutId
 * @param index 新加布局在Snackbar中的位置
 */
public static void SnackbarAddView(Snackbar snackbar, int layoutId, int index) {
    View snackbarview = snackbar.getView();
    Snackbar.SnackbarLayout snackbarLayout=(Snackbar.SnackbarLayout)snackbarview;

    View add_view = LayoutInflater.from(snackbarview.getContext()).inflate(layoutId,null);

    LinearLayout.LayoutParams p = new LinearLayout.LayoutParams( LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
    p.gravity= Gravity.CENTER_VERTICAL;

    snackbarLayout.addView(add_view,index,p);
}
 }</code></pre><p>#感谢<br>[<a href="https://github.com/Trinea/android-common/tree/master/src/cn/trinea/android/common][http://www.jianshu.com/p/cd1e80e64311]:Android" target="_blank" rel="noopener">https://github.com/Trinea/android-common/tree/master/src/cn/trinea/android/common][http://www.jianshu.com/p/cd1e80e64311]:Android</a> Snackbar花式使用指南</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/17/Android-DatePicker/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Silence潇湘夜雨">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Silence潇湘夜雨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/17/Android-DatePicker/" itemprop="url">Android DatePicker</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-17T18:42:57+08:00">
                2019-07-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p><strong>话说日期时间选择控件许多项目都会用到，今天小可不才，也发一个自己写的日期选择控件</strong></p>
<p>##先上图</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1716569-a1a4549b2b075bd4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="CC8V2$(JPZ`{WT42ICK7F}K.png"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1716569-a843b95c6d6c589a.gif?imageMogr2/auto-orient/strip" alt="demo.gif"></p>
<hr>
<h2 id="1、首先自定义日期选择工具类"><a href="#1、首先自定义日期选择工具类" class="headerlink" title="1、首先自定义日期选择工具类"></a>1、首先自定义日期选择工具类</h2><p><strong>里面注释比较详细，我就不在这里一一赘述了。</strong></p>
<pre><code>  /**
    * 日期时间选择控件 使用方法： private EditText inputDate;&lt;br&gt;
    * 需要设置的日期时间文本编辑框 private String initDateTime=&quot;2012年9月3  日 14:44&quot;,初始日期时间值
    * 在点击事件中使用： inputDate.setOnClickListener(new OnClickListener()     
    */
  public class DatePickerDialogUtil implements OnDateChangedListener,
    OnTimeChangedListener {
/** 日期选择 */
private DatePicker mDateChoose;
/** 时间选择 */
private TimePicker mTimeChoose;
/** 对话框 */
private AlertDialog mDialog;
/** 设置时间 */
private String mDateTime;
/** 初始化时间 */
private String mInitDateTime;
private final SimpleDateFormat sdf = new SimpleDateFormat(
        &quot;yyyy年MM月dd日 HH:mm:ss&quot;);
/** 显示时间 */
private String showDate;
/** Activity对象 */
private final Activity mActivity;

/**
 * 日期时间弹出选择框函数
 * 
 * @param activity
 *            调用父Activity
 * @param dateTime
 *            初始日期时间值，作为弹出窗口的标题和日期时间初始值
 */

public DatePickerDialogUtil(Activity activity, String dateTime) {
    this.mActivity = activity;
    this.mInitDateTime = dateTime;
}

/**
 * 初始化时间日期
 * 
 * @param datePicker
 *            日期
 * @param timePicker
 *            时间
 */
public void init(DatePicker datePicker, TimePicker timePicker) {
    // 初始化Calendar
    Calendar calendar = Calendar.getInstance();
    // datePicker不等于空，并且初始化时间不为空
    if (!(datePicker == null || &quot;&quot;.equals(mInitDateTime))) {

    } else {
        mInitDateTime = calendar.get(Calendar.YEAR) + &quot;年&quot;
                + calendar.get(Calendar.MONTH) + &quot;月&quot;
                + calendar.get(Calendar.DAY_OF_MONTH) + &quot;日&quot;
                + calendar.get(Calendar.HOUR_OF_DAY) + &quot;:&quot;
                + calendar.get(Calendar.MINUTE);
    }
    // 初始化时间
    mDateChoose.init(calendar.get(Calendar.YEAR),
            calendar.get(Calendar.MONTH),
            calendar.get(Calendar.DAY_OF_MONTH), this);
    // 设置当前时间
    mTimeChoose.setCurrentHour(calendar.get(Calendar.HOUR_OF_DAY));
    // 设置当前分钟
    mTimeChoose.setCurrentMinute(calendar.get(Calendar.MINUTE));
}

/**
 * 弹出日期时间选择框方法
 * 
 * @param dateText
 *            需要设置的日期时间选择框
 * @return
 */
public AlertDialog datePickerDialog(final Button dateText) {
    LinearLayout mInflater = (LinearLayout) mActivity.getLayoutInflater()
            .inflate(R.layout.datepicker_dialog, null);
    mDateChoose = (DatePicker) mInflater.findViewById(R.id.date_choose);
    mTimeChoose = (TimePicker) mInflater.findViewById(R.id.time_choose);
    // 初始化日期时间
    init(mDateChoose, mTimeChoose);
    // 设置日期为24小时制
    mTimeChoose.setIs24HourView(true);
    // 时间改变事件监听器
    mTimeChoose.setOnTimeChangedListener(this);
    showDate = sdf.format(System.currentTimeMillis());
    // 创建对话框
    mDialog = new AlertDialog.Builder(mActivity).setTitle(mInitDateTime)
            .setView(mInflater)
            .setPositiveButton(&quot;设置&quot;, new OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    dateText.setText(mDateTime);
                }
            }).setNegativeButton(&quot;取消&quot;, new OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    dateText.setText(showDate);
                }
            }).show();
    // 设置日期改变
    onDateChanged(null, 0, 0, 0);
    return mDialog;
}

/**
 * 时间监听器
 */
@Override
public void onTimeChanged(TimePicker view, int hourOfDay, int minute) {
    // 设置日期改变
    onDateChanged(null, 0, 0, 0);
}

/**
 * 日期监听器
 */
@Override
public void onDateChanged(DatePicker view, int year, int monthOfYear,
        int dayOfMonth) {
    // 获取日历实例
    Calendar calendar = Calendar.getInstance();
    // 设置当前日期和时间
    calendar.set(mDateChoose.getYear(), mDateChoose.getMonth(),
            mDateChoose.getDayOfMonth(), mTimeChoose.getCurrentHour(),
            mTimeChoose.getCurrentMinute());
    // 格式化字符串
    SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy年MM月dd日 hh:mm&quot;);
    mDateTime = sdf.format(calendar.getTime());
    mDialog.setTitle(mDateTime);
}

/**
 * 截取字符串
 * 
 * @param src
 *            数据源
 * @param pattern
 *            匹配模式
 * @param indexOrLast
 *            最后一个下标
 * @param frontOrBack
 *            取前面的值还是后面的值
 * @return
 */
public static String spliteString(String src, String pattern,
        String indexOrLast, String frontOrBack) {
    // 结果
    String result = &quot;&quot;;
    int location = -1;
    // 不分大小写相等比较，如果是当前下标
    if (indexOrLast.equalsIgnoreCase(&quot;index&quot;)) {
        // 取得字符串第一次出现的地方
        location = src.indexOf(pattern);
    } else {
        // 字符串最后一个匹配的位置
        location = src.lastIndexOf(pattern);
    }
    // 不分大小写相等比较，如果实在前面
    if (frontOrBack.equalsIgnoreCase(&quot;front&quot;)) {
        if (location != -1) {
            // 截取字符串
            result = src.substring(0, location);
        } else {
            if (location != -1) {
                // 截取字符串
                result = src.substring(location + 1, src.length());
            }
        }
    }

    return result;
}

/**
 * 实现将初始日期时间2016年01月10日 16:45 拆分成年 月 日 时 分 秒,并赋值给calendar
 * 
 * @param initDateTime
 *            初始日期时间值 字符串型
 * @return Calendar
 */
private Calendar getCalendarByInitDate(String initDateTime) {
    // 获取日历实例
    Calendar calendar = Calendar.getInstance();
    /*
     * 将初始日期时间2016年01月10日 16:45 拆分成年 月 日 时 分 秒
     */
    // 日期
    String date = spliteString(mInitDateTime, &quot;日&quot;, &quot;index&quot;, &quot;front&quot;);
    // 时间
    String time = spliteString(mInitDateTime, &quot;日&quot;, &quot;index&quot;, &quot;back&quot;);
    // 年份
    String year = spliteString(date, &quot;年&quot;, &quot;index&quot;, &quot;front&quot;);
    // 月分和日期
    String monthAndDay = spliteString(date, &quot;年&quot;, &quot;index&quot;, &quot;back&quot;);
    // 月
    String month = spliteString(monthAndDay, &quot;月&quot;, &quot;index&quot;, &quot;front&quot;);
    // 日
    String dayOfMonth = spliteString(monthAndDay, &quot;月&quot;, &quot;index&quot;, &quot;back&quot;);
    // 时
    String hour = spliteString(time, &quot;:&quot;, &quot;index&quot;, &quot;front&quot;);
    // 分
    String minute = spliteString(time, &quot;:&quot;, &quot;index&quot;, &quot;back&quot;);
    // 获取当前年份
    int currentYear = Integer.valueOf(year.trim()).intValue();
    // 获取当前月份
    int currentMonth = Integer.valueOf(month.trim()).intValue();
    // 获取当前日
    int currentDay = Integer.valueOf(dayOfMonth.trim()).intValue();
    // 获取当前时
    int currentHour = Integer.valueOf(hour.trim()).intValue();
    // 获取当前分
    int currentMinute = Integer.valueOf(minute.trim()).intValue();
    // 设置当前年、月、日、时、分
    calendar.set(currentYear, currentMonth, currentDay, currentHour,
            currentMinute);
    return calendar;
}
}</code></pre><h2 id="2、布局文件"><a href="#2、布局文件" class="headerlink" title="2、布局文件"></a>2、布局文件</h2><p><strong>布局里面就一个日期和时间选择控件，这里无需多言，相信各位看官都能看懂</strong></p>
<pre><code>  &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
android:layout_width=&quot;match_parent&quot;
android:layout_height=&quot;match_parent&quot;
android:gravity=&quot;center&quot;
android:orientation=&quot;vertical&quot; &gt;
  &lt;DatePicker
    android:id=&quot;@+id/date_choose&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;0dp&quot;
    android:calendarViewShown=&quot;false&quot;
    android:layout_weight=&quot;1&quot; /&gt;

&lt;TimePicker
    android:id=&quot;@+id/time_choose&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;0dp&quot;
    android:layout_weight=&quot;1&quot; /&gt;
&lt;/LinearLayout&gt;</code></pre><h2 id="3、如何调用"><a href="#3、如何调用" class="headerlink" title="3、如何调用"></a>3、如何调用</h2><p><strong>请看如下使用方法</strong></p>
<pre><code>  public class MainActivity extends Activity implements OnClickListener {
/** 开始时间 */
private Button mBtnStart;
/** 结束时间 */
private Button mBtnEnd;
/** 设置文本按钮 */
private Button mBtnSetting;
/** 设置字体样式按钮 */
private Button mBtnSetShaow;
private final SimpleDateFormat sdf = new SimpleDateFormat(
        &quot;yyyy年MM月dd日 HH:mm:ss&quot;);
/** 初始化开始时间 */
protected String mInitDateTimeStart;
/** 初始化结束时间 */
protected String mInitDateTimeEnd;
/** DatePickerDialogUtil类 */
private DatePickerDialogUtil mDatePickerDialog;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_main);
    initView();
}

private void initView() {

    mInitDateTimeStart = sdf.format(System.currentTimeMillis());
    mInitDateTimeEnd = sdf.format(System.currentTimeMillis());

    mBtnStart = (Button) findViewById(R.id.btn_start);
    mBtnStart.setText(mInitDateTimeStart);
    mBtnStart.setOnClickListener(this);

    mBtnEnd = (Button) findViewById(R.id.btn_end);
    mBtnEnd.setText(mInitDateTimeEnd);
    mBtnEnd.setOnClickListener(this);

    mBtnSetting = (Button) findViewById(R.id.btn_textSet);
    mBtnSetting.setOnClickListener(this);

    mBtnSetShaow = (Button) findViewById(R.id.btn_setShaow);
    mBtnSetShaow.setOnClickListener(this);
}

@Override
public void onClick(View view) {
    switch (view.getId()) {
    case R.id.btn_start: {// 开始时间按钮

        mDatePickerDialog = new DatePickerDialogUtil(this,
                mInitDateTimeStart);
        mDatePickerDialog.datePickerDialog(mBtnStart);
        break;
    }

    case R.id.btn_end: {// 结束时间按钮
        mDatePickerDialog = new DatePickerDialogUtil(this, mInitDateTimeEnd);
        mDatePickerDialog.datePickerDialog(mBtnEnd);
        break;
    }
    case R.id.btn_textSet: {// 设置文本按钮
        Intent intent = new Intent(this, TextSetActivity.class);
        startActivity(intent);
        break;
    }
    case R.id.btn_setShaow: {// 设置字体样式按钮
        Intent intent = new Intent(this, SetTextViewActivity.class);
        startActivity(intent);
        break;
    }
    }
}
}</code></pre><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p><strong>图比较丑，还请各位见谅，打脸轻点。代码很简单，相信各位都可以看懂,知识不仅仅是要多写，还要多总结。</strong></p>
<p>​      </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/17/Android-自定义Toast，并且勘误Android工具类里面的ToastUtils/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Silence潇湘夜雨">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Silence潇湘夜雨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/17/Android-自定义Toast，并且勘误Android工具类里面的ToastUtils/" itemprop="url">Android 自定义Toast，并且勘误Android工具类里面的ToastUtils</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-17T18:41:16+08:00">
                2019-07-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><strong>相信大部分仁兄在使用系统Toast的时候，都感觉不太尽如人意，因为系统Toast显示的位置比较固定，并且字体颜色等会跟随系统版本变化，那么能不能自己写一个呢，答案是当然的。当然，这是本文的一个重点，还有一个重点是，要对上一篇<a href="http://www.jianshu.com/p/383411bd3e7e" target="_blank" rel="noopener">Android工具类</a>里面的ToastUtils进行勘误，大概你现在还不太明白，容我慢慢道来，你且看着。</strong></p>
<hr>
<p><strong>先上图</strong></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1716569-ba28f705f413f968.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="
![系统Toast.png](http://upload-images.jianshu.io/upload_images/1716569-cf64bfc0bee87b5a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1716569-1abeee5865840f27.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="自定义的不带图片的Toast（代码里编辑布局）.png"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1716569-4c3c4f0a04a2ca9e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="自定义的带图片的Toast.png"></p>
<hr>
<p>##首先<br><strong>先看toast源码</strong></p>
<pre><code>   public void setText(CharSequence s) {    
    if (mNextView == null) {    
        throw new RuntimeException(&quot;This Toast was not created with Toast.makeText()&quot;);    
    }    
    TextView tv = (TextView) mNextView.findViewById(com.android.internal.R.id.message);    
    if (tv == null) {    
        throw new RuntimeException(&quot;This Toast was not created with Toast.makeText()&quot;);    
    }    
    tv.setText(s);    
}  </code></pre><p><strong>如果不指定view，则mNextView的值为null。就会抛出异常。另外使用第一种方式时，就算你为Toast设置好了View也不能这样调用：toast.setText(s);<br>会抛出This Toast was not created with Toast.makeText()异常。解决的办法是定义一个TextView，然后为TextView赋值，再加到XXLayout中，<br>使用setView(XXLayout)把XXLayout设置成Toast的View。</strong></p>
<p><strong>本人遇到的错误我也一并贴出来</strong><br>Caused by: java.lang.RuntimeException: This Toast was not created with Toast.makeText()<br>​    at android.widget.Toast.setText(Toast.java:275)<br>​    at cn.and.ToastActivity.onCreate(ToastActivity.java:20)<br>​    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)<br>​    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)</p>
<p><strong>再看看<a href="http://www.jianshu.com/p/383411bd3e7e" target="_blank" rel="noopener">Android 工具类</a>里面的ToastUtils写法</strong></p>
<pre><code>   public static void showToast(Context context, String message) {
if (toast == null) {
    toast = Toast.makeText(context, message, Toast.LENGTH_SHORT);
} else {
    toast.setText(message);
}
toast.show();
}</code></pre><p><strong>虽然平时用着不会报错，但是有的时候还是会报错，为了防患于未然，今天就重新放出自己查阅资料后修改的Toast工具类</strong></p>
<p>##其次，请各位看官看Toast工具类</p>
<p><strong>由于代码比较简单，我也就不再一一赘述了，相信各位看官都可以看懂</strong></p>
<pre><code>  public class ToastUtils {
public static final int LENGTH_SHORT = 0;
public static final int LENGTH_LONG = 1;
private static View toastView;
private WindowManager mWindowManager;
private static int mDuration;
private final int WHAT = 100;
private static View oldView;
private static Toast toast;
private static CharSequence oldText;
private static CharSequence currentText;
private static ToastUtils instance = null;
private static TextView textView;
// 是否显示
private static boolean isShow = true;
private static ImageView mImgIcon;
private static TextView mTxtMsg;
private static LinearLayout mLytShow;
   /**
 * 显示消息(这个是把文本颜色和背景色没有提出来的写法)
 * 
 * @param context
 *            上下文
 * @param message
 *            消息内容
 */
public static void showToast(Context context, String message) {
    if (isShow) {
        toast = new Toast(context);
        // 消息内容
        mTxtMsg = new TextView(context);
        LinearLayout.LayoutParams lParams1 = new LinearLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        mTxtMsg.setTextColor(Color.parseColor(&quot;#000000&quot;));
        mTxtMsg.setTextSize(DensityUtils.dp2px(context, 12));
        mTxtMsg.setPadding(10, 5, 10, 5);

        mTxtMsg.setLayoutParams(lParams1);

        mLytShow = new LinearLayout(context);
        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
                LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
        mLytShow.setOrientation(LinearLayout.HORIZONTAL);
        mLytShow.setLayoutParams(params);

        int roundRadius = 100; // 8dp 圆角半径
        int fillColor = Color.parseColor(&quot;#F89009&quot;);// 内部填充颜色
        GradientDrawable gd = new GradientDrawable();// 创建drawable
        gd.setCornerRadius(roundRadius);
        gd.setColor(fillColor);

        mLytShow.setBackgroundDrawable(gd);
        mLytShow.addView(mTxtMsg);

        if (message != null) {
            mTxtMsg.setText(message);
        }
        toast.setView(mLytShow);
        toast.setGravity(Gravity.BOTTOM, 0,
                DensityUtils.dp2px(context, 100));
        toast.setDuration(Toast.LENGTH_SHORT);
        toast.show();
    }
}
/**
 * 显示消息（这个是把文本颜色和toast背景颜色提出来的写法）
 * 
 * @param context
 *            上下文
 * @param message
 *            消息内容
 */
public static void showToast(Context context, String message,
        String textColor, String bgColor) {
    if (isShow) {
        toast = new Toast(context);
        // 消息内容
        mTxtMsg = new TextView(context);
        LinearLayout.LayoutParams lParams1 = new LinearLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        mTxtMsg.setTextColor(Color.parseColor(textColor));
        mTxtMsg.setTextSize(DensityUtils.dp2px(context, 12));
        mTxtMsg.setPadding(10, 5, 10, 5);

        mTxtMsg.setLayoutParams(lParams1);

        mLytShow = new LinearLayout(context);
        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
                LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
        mLytShow.setOrientation(LinearLayout.HORIZONTAL);
        mLytShow.setLayoutParams(params);

        int roundRadius = 100; // 8dp 圆角半径
        int fillColor = Color.parseColor(bgColor);// 内部填充颜色
        GradientDrawable gd = new GradientDrawable();// 创建drawable
        gd.setCornerRadius(roundRadius);
        gd.setColor(fillColor);

        mLytShow.setBackgroundDrawable(gd);
        mLytShow.addView(mTxtMsg);

        if (message != null) {
            mTxtMsg.setText(message);
        }
        toast.setView(mLytShow);
        toast.setGravity(Gravity.BOTTOM, 0,
                DensityUtils.dp2px(context, 100));
        toast.setDuration(Toast.LENGTH_SHORT);
        toast.show();
    }
}

/**
 * 显示Toast
 * 
 * @param context
 *            上下文
 * @param message
 *            信息内容
 */
public static void showIconToast(Context context, String message, int resId) {
    if (isShow) {
        toast = new Toast(context);
        LayoutInflater inflater = LayoutInflater.from(context);
        View view = inflater.inflate(R.layout.mtoast_layout, null);
        TextView tv = (TextView) view.findViewById(R.id.toast_tv);
        ImageView mImgShow = (ImageView) view.findViewById(R.id.img_toast);
        if (message != null) {
            tv.setText(message);
        }
        mImgShow.setImageResource(resId);
        toast.setView(view);
        toast.setDuration(Toast.LENGTH_SHORT);
        toast.show();
    }
}

/**
 * 显示消息内容（带图标）
 * 
 * @param context
 *            上下文
 * @param message
 *            消息内容
 * @param resId
 *            图片资源id
 * @param textColor
 *            文本颜色
 * @param textSize
 *            文本大小
 * @param bgColor
 *            背景颜色
 */
public static void showIconToastMessage(Context context, String message,
        int resId, String textColor, float textSize, String bgColor) {
    if (isShow) {
        toast = new Toast(context);
        // 图片
        mImgIcon = new ImageView(context);
        LinearLayout.LayoutParams lParams = new LinearLayout.LayoutParams(
                DensityUtils.dp2px(context, 48), DensityUtils.dp2px(
                        context, 48));
        mImgIcon.setImageResource(resId);
        lParams.gravity = Gravity.CENTER_HORIZONTAL
                | Gravity.CENTER_VERTICAL;
        lParams.setMargins(5, 5, 5, 5);
        mImgIcon.setLayoutParams(lParams);

        // 消息内容
        mTxtMsg = new TextView(context);
        LinearLayout.LayoutParams lParams1 = new LinearLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        mTxtMsg.setTextColor(Color.parseColor(textColor));
        mTxtMsg.setTextSize(DensityUtils.dp2px(context, textSize));
        mTxtMsg.setLayoutParams(lParams1);

        mLytShow = new LinearLayout(context);
        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
                LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
        mLytShow.setOrientation(LinearLayout.HORIZONTAL);
        mLytShow.setLayoutParams(params);

        int roundRadius = 100; // 8dp 圆角半径
        // int strokeColor = Color.parseColor(&quot;#2E3135&quot;);// 边框颜色
        int fillColor = Color.parseColor(bgColor);// 内部填充颜色
        GradientDrawable gd = new GradientDrawable();// 创建drawable
        gd.setColor(fillColor);
        gd.setCornerRadius(roundRadius);
        // gd.setStroke(0, strokeColor);

        mLytShow.setBackgroundDrawable(gd);
        mLytShow.addView(mImgIcon);
        mLytShow.addView(mTxtMsg);

        if (message != null) {
            mTxtMsg.setText(message);
        }
        toast.setView(mLytShow);
        toast.setGravity(Gravity.CENTER, 0, 0);
        toast.setDuration(Toast.LENGTH_SHORT);
        toast.show();
    }
}
}</code></pre><p>##再次，资源文件，我也一并贴出来吧<br><strong>比较简单，就一个ImageView和一个textview</strong><br>​<br>​      &lt;LinearLayout xmlns:android=”<a href="http://schemas.android.com/apk/res/android&quot;" target="_blank" rel="noopener">http://schemas.android.com/apk/res/android&quot;</a><br>​    android:layout_width=”match_parent”<br>​    android:layout_height=”wrap_content”<br>​    android:layout_margin=”5dp”<br>​    android:background=”@drawable/toast_background”<br>​    android:orientation=”vertical” &gt;<br>​<br>    <linearlayout android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_gravity="center" android:gravity="center" android:orientation="horizontal" android:padding="5dp"></linearlayout></p>
<pre><code>    &lt;ImageView
        android:id=&quot;@+id/img_toast&quot;
        android:layout_width=&quot;32dp&quot;
        android:layout_height=&quot;32dp&quot;
        android:layout_gravity=&quot;center&quot;
        android:src=&quot;@drawable/ic_launcher&quot; /&gt;

    &lt;TextView
        android:id=&quot;@+id/toast_tv&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_gravity=&quot;center&quot;
        android:gravity=&quot;center&quot;
        android:text=&quot;moren&quot;
        android:textColor=&quot;#fff&quot;
        android:textStyle=&quot;bold&quot; /&gt;
&lt;/LinearLayout&gt;

&lt;/LinearLayout&gt;</code></pre><p> #最后</p>
<p><strong>感谢 <a href="http://yongzhi00.iteye.com/blog/1173946/" target="_blank" rel="noopener">qiushyfm</a></strong><br><strong><a href="http://www.jianshu.com/u/6bac141ea5fe" target="_blank" rel="noopener">Jlanglang</a></strong></p>
<p><strong>也欢迎大家关注我的简书<a href="http://www.jianshu.com/u/1e2eec6f972c" target="_blank" rel="noopener">Silence潇湘夜雨</a> 和 github<a href="https://github.com/muyishuangfeng" target="_blank" rel="noopener">Silence潇湘夜雨</a><br>   小可不才，如果什么地方写的不对，还请指正。</strong></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/17/Git用法初探/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Silence潇湘夜雨">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Silence潇湘夜雨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/17/Git用法初探/" itemprop="url">Git用法初探</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-17T18:39:28+08:00">
                2019-07-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h2><p>之前一直在用svn和cvs，感觉跟不上时代的潮流了，加上git优点多多，所以就抽出时间进行了git基本的学习，一是怕自己忘记了，另外一个希望可以帮助到新手，避免走弯路，如有不对的地方还望指正。</p>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Git是一个开源的分布式版本控制系统，可以有效、高速的处理从很小到非常大的项目版本管理。 Git 是 Linus Torvalds 为了帮助管理 Linux 内核开发而开发的一个开放源码的版本控制软件。 Torvalds 开始着手开发 Git 是为了作为一种过渡方案来替代 BitKeeper，后者之前一直是 Linux 内核开发人员在全球使用的主要源代码工具。开放源码社区中的有些人觉得BitKeeper 的许可证并不适合开放源码社区的工作，因此 Torvalds 决定着手研究许可证更为灵活的版本控制系统。尽管最初 Git 的开发是为了辅助 Linux 内核开发的过程，但是我们已经发现在很多其他自由软件项目中也使用了 Git。</p>
<h2 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h2><p>1、<em>版本库本地化 支持离线提交，相对独立不影响协同开发</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  每个开发者都拥有自己的版本控制库，在自己的版本库上可以任意的执行提交代码、创建分支等行为。</span><br><span class="line">例如，开发者认为自己提交的代码有问题？没关系，因为版本库是自己的，回滚历史、反复提交、</span><br><span class="line">归并分支并不会影响到其他开发者。</span><br></pre></td></tr></table></figure>

<p>2、<em>更少的“仓库污染”</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">   git对于每个工程只会产生一个.git目录，这个工程所有的版本控制信息都在这个目录中，</span><br><span class="line">不会像SVN那样在每个目录下都产生.svn目录。</span><br></pre></td></tr></table></figure>

<p>3、<em>把内容按元数据方式存储，完整克隆版本库</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">   所有版本信息位于.git目录中，它是处于你的机器上的一个克隆版的版本库，</span><br><span class="line">它拥有中心版本库上所有的东西，例如标签、分支、版本记录等。</span><br></pre></td></tr></table></figure>

<p>4、<em>支持快速切换分支方便合并，比较合并性能好</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在同一目录下即可切换不同的分支，方便合并，且合并文件速度比SVN快。</span><br></pre></td></tr></table></figure>

<p>5、<em>分布式版本库，无单点故障，内容完整性好</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">   内容存储使用的是SHA-1哈希算法。这能确保代码内容的完整性，</span><br><span class="line">确保在遇到磁盘故障和网络问题时降低对版本库的破坏。</span><br></pre></td></tr></table></figure>

<h2 id="git安装"><a href="#git安装" class="headerlink" title="git安装"></a>git安装</h2><ul>
<li><p>1、Linux安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">直接在终端输入 sudo apt-get install git-core</span><br></pre></td></tr></table></figure>
</li>
<li><p>2、windows安装 </p>
<p>   首先进入<a href="https://git-scm.com/" target="_blank" rel="noopener">官网</a>下载对应版本，然后在下路路径下点击刚才下载的exe文件一直默认安装即可。</p>
</li>
</ul>
<h2 id="git使用（主要针对windows）"><a href="#git使用（主要针对windows）" class="headerlink" title="git使用（主要针对windows）"></a>git使用（主要针对windows）</h2><ul>
<li><p>1、配置身份(windows打开GitBash，Linux打开shell)——(提交代码的时候就知道是谁提交的)如下所示:）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;Your Name&quot;</span><br><span class="line">git config --global user.email &quot;Your email&quot;</span><br></pre></td></tr></table></figure>

<pre><code>配置完成之后同样的输入 
git config --global user.name和
git config --global user.email 
即可看到用户名和邮箱</code></pre></li>
<li><p>2、创建代码仓库</p>
<pre><code>进入到你需要创建仓库的目录直接在Git Bash中输入git init  
即可创建完之后会在你创建仓库的目录下生成一个隐藏的.git文件夹，
这个文件夹就是用来记录本地所有的Git操作的（如果想删除仓库直接删除.git文件夹即可）。</code></pre></li>
<li><p>3、提交本地代码（分为两步add 和commit）</p>
<ul>
<li><p>add添加文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  add是将需要提交的代码先添加进来，commit则是真正的提交操作。</span><br><span class="line">比如我们在D盘的Project下面有一个Test文件夹和Hello world文件，如果想提交Hello world文件，</span><br><span class="line">则需要先添加——命令如下：</span><br><span class="line"> git add Hello world</span><br><span class="line">如果想添加整个D盘整个Project文件夹下的Test文件夹则可以这样写:</span><br><span class="line"> git add Project</span><br><span class="line">如果你还是觉得复杂还可以这样写(将Project文件夹下的所有文件夹进行添加):</span><br><span class="line"> git add .</span><br></pre></td></tr></table></figure>
</li>
<li><p>commit提交文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">上面的已经将文件添加好了，我们来提交一下，命令如下:</span><br><span class="line"> git commit -m &quot;First commit.&quot;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<p><em>注意 ：</em> 在commit命令的后面一定要通过-m参数来加上提交的描述信息，没有描述信息的提交被认为是不合法的。</p>
<ul>
<li><p>4、忽略文件</p>
<pre><code>   Git提供了一种可配置性很强的机制允许用户将指定的文件或目录排除在版本控制之外，
他回检查代码仓库的根目录下是否存在一个名为.gitignore的文件，如果存在的话就去一行
行读取这个文件的内容，并把每一行指定的文件或目录排除在版本控制之外。</code></pre><p><em>注意 :</em> .gitignore中指定的文件或目录是可以使用星(*)通配符的。</p>
</li>
</ul>
<pre><code>在终端输入 Hello world/ </code></pre><p>   这样就表示把 Hello world文件忽略掉了，然后使用add命令进行添加<br>   git add .<br>   然后执行commit命令完成提交<br>   git commit -m “Sencond commit.”</p>
<ul>
<li><p>5、查看修改内容（使用status命令就可以了命令如下：）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure>
</li>
<li><p>6、 查看更改内容</p>
<ul>
<li><p>1、查看所有文件的更改内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff</span><br></pre></td></tr></table></figure>
</li>
<li><p>2、查看单个文件的更改内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff d:Project/Hello world.txt</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>7、撤销未提交的修改</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">比如我们D盘Project目录下的Hello world 原来内容为123，我们修改为456</span><br><span class="line">，然后想撤销修改我们可以使用checkout命令,如下：</span><br><span class="line">git checkout d:Project/Hello world.txt</span><br><span class="line">然后重新输入git status即可查看结果（这种只能针对没有执行 git add命令的文件)如果执行了add 命令的</span><br><span class="line">就不能取消了吗？当然不是，如果想要执行撤销命令先要取消添加，才能执行撤销提交。取消命令是reset，如下所示：</span><br><span class="line">git reset HEAD d:Project/Hello world.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>8、查看提交记录（可以使用log命令查看历史提交记录)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log（查看所有的提交记录)</span><br></pre></td></tr></table></figure>

<ul>
<li><ul>
<li><p>比如我们的id是123，那么查看具体的命令如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log 123 （查看id为123的具体的提交记录）</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><ul>
<li><p>查看一行提交记录呢，命令如下：(命令是-1)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log 123 -1</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><ul>
<li><p>如果想查看修改的具体内容呢，命令如下：(命令是-p)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log 123 -1 -p</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>9、git分支</p>
<ul>
<li><p>1、查看分支</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -a</span><br></pre></td></tr></table></figure>
</li>
<li><p>2、创建分支</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch &quot;分支名称&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>3、切换分支</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout “分支名称&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>4、合并分支到主干上</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout master</span><br><span class="line">git merge &quot;分支名称&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>5、删除分支</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -D 分支名称</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>10、与远程版本库协作</p>
<ul>
<li><p>1、下载代码到本地(clone)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone &quot;地址“</span><br></pre></td></tr></table></figure>
</li>
<li><p>2、提价代码到远程库(push)</p>
<p>  git push origin master （其中origin指定的是远程版本库的Git地址，master指同步到那个分支上)</p>
</li>
<li><p>3、同步远程版本库的代码到本地(fetch)</p>
<pre><code>git fetch origin master</code></pre></li>
<li><p>4、查看远程版本库修改了那些东西</p>
<pre><code>git diff origin/master</code></pre></li>
<li><p>5、分支上的修改合并到主干上</p>
<pre><code>git merge origin/master</code></pre></li>
<li><p>6、从远程库同步最新的代码并且合并到本地</p>
<pre><code>git pull origin/master</code></pre></li>
</ul>
</li>
</ul>
<h2 id="感谢"><a href="#感谢" class="headerlink" title="感谢"></a>感谢</h2><p><a href="http://blog.csdn.net/dengsilinming/article/details/7999188" target="_blank" rel="noopener">Git的优势和用法</a></p>
<h2 id="关于我"><a href="#关于我" class="headerlink" title="关于我"></a>关于我</h2><p><a href="https://www.jianshu.com/u/1e2eec6f972c" target="_blank" rel="noopener">Silence潇湘夜雨</a></p>
<p><a href="https://gitee.com/1032200695/events" target="_blank" rel="noopener">码云</a></p>
<p><a href="https://github.com/muyishuangfeng" target="_blank" rel="noopener">github</a></p>
<p><a href="https://juejin.im/user/58df0abf61ff4b006b115e43" target="_blank" rel="noopener">掘金</a></p>
<p><a href="https://muyishuangfeng.github.io/" target="_blank" rel="noopener">个人博客</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/17/Ubuntu环境变量配置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Silence潇湘夜雨">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Silence潇湘夜雨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/17/Ubuntu环境变量配置/" itemprop="url">Ubuntu环境变量配置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-17T18:38:25+08:00">
                2019-07-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#前提：<br>​       之前一直想用ubuntu，但是现在大部分编程都是在windows上，所以很少用。但是现在需要编译ffmpeg，<br>​    奈何windows上遇到了各种bug，不好处理，索性直接给自己的老人机上安装了ubuntu系统。今天主要是针对<br>​    小白来讲解一下ubuntu配置jdk和ndk环境变量的，还请给为大佬绕道轻点打脸。</p>
<p>###首先<br><strong>本篇ubuntu版本是16.04，JDK版本是1.8和NDK版本是android-ndk-r12b，下面的是链接地址</strong></p>
<ul>
<li><p>下载<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html?utm_source=androiddevtools&utm_medium=website" target="_blank" rel="noopener">Linux版本的JDK</a></p>
</li>
<li><p>下载 <a href="https://dl.google.com/android/repository/android-ndk-r12b-linux-x86_64.zip?utm_source=androiddevtools&utm_medium=website" target="_blank" rel="noopener">Linux版本的NDK</a></p>
</li>
<li><p>下载 <a href="https://dl.google.com/dl/android/studio/ide-zips/3.0.1.0/android-studio-ide-171.4443003-linux.zip?utm_source=androiddevtools&utm_medium=website" target="_blank" rel="noopener">Linux版本的Android Studio</a><br>###其次</p>
<ul>
<li>使用crtl+alt+t切换到终端，然后切换到你的jdk下载地址，我的下载地址在“/home/silence/下载” 路径下如下图所示，当然我这个是已经安装过的了目前没有JDK和NDK安装包<br>#####1、JDK安装<br><img src="https://upload-images.jianshu.io/upload_images/1716569-1c9bdab5e1dcf735.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ubuntuJDK下载路径.jpg"></li>
</ul>
</li>
<li><p>选择索要下载的Linux安装包，我这里使用的是jdk-8u161-linux-x64.tar.gz<br><img src="https://upload-images.jianshu.io/upload_images/1716569-11506c5412342c39.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="JDK版本.png"></p>
</li>
<li><p>在usr/lib下新建jdk包，并且移动jdk-8u161-linux-x64.tar.gz并且解压</p>
<pre><code>1、在终端输入sudo mkdir /usr/lib/jdk新建jdk包
2、移动jdk-8u161-linux-x64.tar.gz到jdk包下，在终端输入
   sudo mv jdk-8u161-linux-x64.tar.gz /usr/lib/jdk
3、解压jdk-8u161-linux-x64.tar.gz包 ，在终端输入
   sudo tar zxvf jdk-8u161-linux-x64.tar.gz 解压之后得到 
   jdk1.8.0_161 包</code></pre></li>
<li><p>配置环境变量</p>
<pre><code>1、在终端输入sudo gedit ~/.bashrc 打开~/.bashrc文件其中
  【~/】表示/home/用户名,如下图所示，其中sudo是超级用户需要输入密码</code></pre><p>   <img src="https://upload-images.jianshu.io/upload_images/1716569-1127ecd1fabcb74b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="终端打开bashrc.jpg"></p>
<pre><code>2、在~/.bashrc的最下面输入（如下图所示）
   export JAVA_HOME=/usr/lib/jdk/jdk1.8.0_161  
   export JRE_HOME=${JAVA_HOME}/jre  
   export CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib  
   export PATH=${JAVA_HOME}/bin:$PATH</code></pre></li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/1716569-4e00ca7cb878ae89.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="bashrc输入环境变量.jpg"></p>
<pre><code>3、在终端输入source ~/.bashrc是环境变量生效（如下图）</code></pre><p><img src="https://upload-images.jianshu.io/upload_images/1716569-9bedfee9c5c728fa.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="环境变量生效.jpg"><br><strong>当然，我这里已经把JDK环境和NDK的环境变量都已经配置了</strong></p>
<ul>
<li><p>其中/usr/lib/jdk表示的就是刚才新建的那个文件夹</p>
</li>
<li><p>后面的JRE_HOME、CLASSPATH、PATH依次写入即可。</p>
</li>
<li><p>然后在终端输入java -version如下图所示即表示成功（如下图所示）。<br><img src="https://upload-images.jianshu.io/upload_images/1716569-bb67867f4db6f4bd.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="JDK成功图.jpg"><br>#####2、NDK安装</p>
<ul>
<li>首先下载NDK包，我这里使用的是<a href="https://dl.google.com/android/repository/android-ndk-r12b-linux-x86_64.zip?utm_source=androiddevtools&utm_medium=website" target="_blank" rel="noopener">android-ndk-r12b-linux-x86_64.zip</a>下载之后<br>切换到下载路径下即—– /home/silence/下载</li>
</ul>
</li>
<li><p>新建NDK安装路径，我这里是先安装了 <a href="https://dl.google.com/dl/android/studio/ide-zips/3.0.1.0/android-studio-ide-171.4443003-linux.zip?utm_source=androiddevtools&utm_medium=website" target="_blank" rel="noopener">android-studio-ide-171.4443003-linux.zip</a></p>
<pre><code>1、会在/home/silence/Android下生成一个Sdk包，把NDK包移动到/home/silence/Android路径下，
2、在终端输入 sudo mv android-studio-ide-171.4443003-linux.zip即可，
然后终端切换到Android路径下，即cd /home/silence/Android 
3、输入 ls -all 即可看到/home/silence/Android路径下所有的文件，
4、再对android-studio-ide-171.4443003-linux.zip进行解压，在终端输入 
sudo unzip android-studio-ide-171.4443003-linux.zip即可得到一个
Android-studio 包 
5、切换到android-studio/bin目录下打开.studio.sh即可打开android-studio
 在终端输入 cd android-studio/bin,然后再输入 sudo ./studio.sh即可，这样    
 就可以打开android studio
6、解压NDK包，在终端输入 sudo unzip android-ndk-r12b-linux-
   x86_64.zip即可得到一个 包名为android-ndk-r12b的包。
7、配置NDK环境变量，在终端输入 sudo ~/.bashrc打开~/.bashrc文件，
   在最后输入多需要的环境变量路径，然后保存关闭。
8、使环境变量生效，在终端输入source ~/.bashrc即可。
9、验证环境变量成功与否，在终端输入 ndk-build -v,如下图所示则配置成功。</code></pre><p><img src="https://upload-images.jianshu.io/upload_images/1716569-38746433544edec2.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="NDK成功图.jpg"></p>
</li>
</ul>
<h3 id="致谢"><a href="#致谢" class="headerlink" title="致谢"></a>致谢</h3><p>  <a href="https://www.jianshu.com/p/9d8322e5de7f" target="_blank" rel="noopener">Android NDK开发（三） 在Linux环境下编译FFmpeg</a><br><a href="http://www.androiddevtools.cn/index.html" target="_blank" rel="noopener">AndroidDevTools</a></p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><pre><code>   配置环境变量总体来说还是比较顺利的，但是当刚接触到新东西的时候会有所胆怯，但是当我们真正战胜
自己的胆怯而完成的时候却又是另一番景象，所以遇到问题还是迎难而上吧。推荐一个Android交流群，群号
493180098。还有一句，请尊重作者的辛苦劳动，转载请标明出处，谢谢。</code></pre><p> <a href="https://www.jianshu.com/u/1e2eec6f972c" target="_blank" rel="noopener">我的简书</a><br><a href="https://juejin.im/user/58df0abf61ff4b006b115e43" target="_blank" rel="noopener">我的掘金</a><br><a href="https://github.com/muyishuangfeng" target="_blank" rel="noopener">我的github</a><br><a href="https://muyishuangfeng.github.io/" target="_blank" rel="noopener">我的个人博客</a><br><strong>小弟就厚着脸皮说欢迎关注哈</strong></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Silence潇湘夜雨</p>
              <p class="site-description motion-element" itemprop="description">Android开发一枚</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">27</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Silence潇湘夜雨</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618},"display":{"superSample":2,"width":150,"height":300,"position":"right","hOffset":0,"vOffset":-20},"mobile":{"show":false},"react":{"opacityDefault":0.5,"opacityOnHover":0.5},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
